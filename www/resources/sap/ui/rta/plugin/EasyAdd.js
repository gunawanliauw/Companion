/*
 * ! SAP UI development toolkit for HTML5 (SAPUI5)

(c) Copyright 2009-2017 SAP SE. All rights reserved
 */
sap.ui.define(['sap/ui/rta/plugin/additionalElements/AdditionalElementsPlugin'],function(A){"use strict";var E=A.extend("sap.ui.rta.plugin.EasyAdd",{metadata:{library:"sap.ui.rta",properties:{},associations:{},events:{}}});E.prototype.registerElementOverlay=function(o){this._oDelegate={"onAfterRendering":function(){var a=function(o){this.showAvailableElements(true,[o]);}.bind(this);var i;if(o.$().hasClass("sapUiRtaPersAdd")&&o.$().children(".sapUiRtaPersAddIconOuter").length<=0){i=o.getId()+"-AddButton";var h=jQuery("<div class='sapUiRtaPersAddIconOuter' draggable='true'> </div>");o._oAddButton=new sap.m.Button(i,{text:this.getContextMenuTitle(true,o),icon:"sap-icon://add",press:function(e){var o=sap.ui.getCore().byId(e.getSource().getId().replace("-AddButton",""));a(o);e.cancelBubble();}}).placeAt(h.get(0));o.$().append(h);h[0].addEventListener("mouseover",function(e){e.stopPropagation();var o=sap.ui.getCore().byId(e.fromElement.id);if(o&&o.getMetadata().getName()==="sap.ui.dt.ElementOverlay"){var p=o.getParentElementOverlay();p.$().removeClass("sapUiRtaOverlayHover");}});h[0].addEventListener("mouseleave",function(e){e.stopPropagation();var o=sap.ui.getCore().byId(e.toElement.id);if(o&&o.getMetadata().getName()==="sap.ui.dt.ElementOverlay"){var p=o.getParentElementOverlay();if(p.getMovable()){p.$().addClass("sapUiRtaOverlayHover");}}});h[0].addEventListener("dragstart",function(e){e.stopPropagation();e.preventDefault();});}o.removeEventDelegate(this._oDelegate,this);}};var c=o.getElementInstance();if(c.getMetadata().getName()==="sap.uxap.ObjectPageSection"&&this.hasStableId(o)){o.addStyleClass("sapUiRtaPersAdd");c.addStyleClass("sapUiRtaMarginBottom");}o.addEventDelegate(this._oDelegate,this);A.prototype.registerElementOverlay.apply(this,arguments);};E.prototype.deregisterElementOverlay=function(o){var c=o.getElementInstance();if(c.getMetadata().getName()==="sap.uxap.ObjectPageSection"){o.removeStyleClass("sapUiRtaPersAdd");c.removeStyleClass("sapUiRtaMarginBottom");o.removeEventDelegate(this._oDelegate,this);if(o._oAddButton){o._oAddButton.destroy();}}};return E;},true);
