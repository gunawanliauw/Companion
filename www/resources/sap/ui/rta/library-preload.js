/*
 * ! SAP UI development toolkit for HTML5 (SAPUI5)

(c) Copyright 2009-2017 SAP SE. All rights reserved
 */
sap.ui.predefine('sap/ui/rta/RuntimeAuthoring',["jquery.sap.global","sap/ui/base/ManagedObject","sap/ui/rta/toolbar/Fiori","sap/ui/rta/toolbar/Standalone","sap/ui/rta/toolbar/Personalization","sap/ui/dt/ElementUtil","sap/ui/dt/DesignTime","sap/ui/dt/OverlayRegistry","sap/ui/dt/Overlay","sap/ui/rta/command/Stack","sap/ui/rta/command/CommandFactory","sap/ui/rta/command/LREPSerializer","sap/ui/rta/plugin/Rename","sap/ui/rta/plugin/DragDrop","sap/ui/rta/plugin/RTAElementMover","sap/ui/rta/plugin/CutPaste","sap/ui/rta/plugin/Remove","sap/ui/rta/plugin/CreateContainer","sap/ui/rta/plugin/additionalElements/AdditionalElementsPlugin","sap/ui/rta/plugin/additionalElements/AddElementsDialog","sap/ui/rta/plugin/additionalElements/AdditionalElementsAnalyzer","sap/ui/rta/plugin/Combine","sap/ui/rta/plugin/Split","sap/ui/rta/plugin/Selection","sap/ui/rta/plugin/Settings","sap/ui/dt/plugin/ContextMenu","sap/ui/dt/plugin/TabHandling","sap/ui/fl/FlexControllerFactory","sap/ui/rta/ui/SettingsDialog","./Utils","sap/ui/fl/transport/Transports","sap/ui/fl/transport/TransportSelection","sap/ui/fl/Utils","sap/ui/fl/registry/Settings","sap/m/MessageBox","sap/m/MessageToast","sap/ui/rta/util/PopupManager","sap/ui/core/BusyIndicator","sap/ui/dt/DOMUtil","sap/ui/rta/util/StylesLoader"],function(q,M,F,S,P,E,D,O,a,C,b,L,R,c,d,e,f,g,A,h,i,j,k,l,m,n,T,o,p,U,r,s,t,u,v,w,x,B,y,z){"use strict";var G="sap-ui-fl-max-layer";
var H=M.extend("sap.ui.rta.RuntimeAuthoring",{
metadata:{library:"sap.ui.rta",associations:{"rootControl":{type:"sap.ui.core.Control"}},properties:{"customFieldUrl":"string","showCreateCustomField":"boolean","showToolbars":{type:"boolean",defaultValue:true},"triggeredFromDialog":{type:"boolean",defaultValue:false},"showSettingsDialog":{type:"boolean",defaultValue:true},"showWindowUnloadDialog":{type:"boolean",defaultValue:true},"commandStack":{type:"any"},"plugins":{type:"any",defaultValue:{}},"flexSettings":{type:"object"},"mode":{type:"string",defaultValue:"adaptation"}},events:{"start":{parameters:{editablePluginsCount:{type:"int"}}},"stop":{},"failed":{},"selectionChange":{parameters:{selection:{type:"sap.ui.dt.Overlay[]"}}},"undoRedoStackModified":{}}},
_sAppTitle:null
});
H.prototype.getDefaultPlugins=function(){if(!this._mDefaultPlugins){var b1=new b({flexSettings:this.getFlexSettings()});this._mDefaultPlugins={};this._mDefaultPlugins["selection"]=new l({commandFactory:b1,multiSelectionRequiredPlugins:[j.getMetadata().getName(),f.getMetadata().getName()],elementEditableChange:this._onElementEditableChange.bind(this)});var c1=new d({commandFactory:b1});this._mDefaultPlugins["dragDrop"]=new c({elementMover:c1,commandFactory:b1,dragStarted:this._handleStopCutPaste.bind(this)});this._mDefaultPlugins["cutPaste"]=new e({elementMover:c1,commandFactory:b1});this._mDefaultPlugins["remove"]=new f({commandFactory:b1});this._mDefaultPlugins["additionalElements"]=new A({commandFactory:b1,analyzer:i,dialog:new h()});this._mDefaultPlugins["rename"]=new R({commandFactory:b1,editable:this._handleStopCutPaste.bind(this)});this._mDefaultPlugins["settings"]=new m({commandFactory:b1});this._mDefaultPlugins["createContainer"]=new g({commandFactory:b1});this._mDefaultPlugins["combine"]=new j({commandFactory:b1});this._mDefaultPlugins["split"]=new k({commandFactory:b1});this._mDefaultPlugins["contextMenu"]=new n();this._mDefaultPlugins["tabHandling"]=new T();}return q.extend({},this._mDefaultPlugins);};
H.prototype._destroyDefaultPlugins=function(b1){for(var c1 in this._mDefaultPlugins){var d1=this._mDefaultPlugins[c1];if(d1&&!d1.bIsDestroyed){if(!b1||b1[c1]!==d1){d1.destroy();}}}if(!b1){this._mDefaultPlugins=null;}};
H.prototype.init=function(){this._onCommandStackModified=this._onStackModified.bind(this);this.iEditableOverlaysCount=0;this.setFlexSettings({layer:"CUSTOMER",developerMode:true});this.oPopupManage=new x({open:this.onPopupOpen.bind(this),close:this.onPopupClose.bind(this)});};
H.prototype.onPopupOpen=function(b1){if(b1.getParameters()instanceof sap.m.Dialog&&this._oToolsMenu instanceof F){this._oToolsMenu.setColor("contrast");}this._oToolsMenu.bringToFront();};
H.prototype.onPopupClose=function(b1){if(b1.getParameters()instanceof sap.m.Dialog){this._oToolsMenu.setColor();}};
H.prototype.setPlugins=function(b1){if(this._oDesignTime){throw new Error('Cannot replace plugins: runtime authoring already started');}this.setProperty("plugins",b1);};
H.prototype.setFlexSettings=function(b1){var c1=q.sap.getUriParameters();var d1=c1.mParams["sap-ui-layer"];if(d1&&d1.length>0){b1.layer=d1[0];}this.setProperty("flexSettings",q.extend(this.getFlexSettings(),b1));};
H.prototype.getLayer=function(b1){return this.getFlexSettings().layer;};
H.prototype._getFlexController=function(){var b1=this._oRootControl||sap.ui.getCore().byId(this.getRootControl());return o.createForControl(b1);};
H.prototype._getTextResources=function(){return sap.ui.getCore().getLibraryResourceBundle("sap.ui.rta");};
H.prototype.start=function(){if(!this._oDesignTime){this._oRootControl=sap.ui.getCore().byId(this.getRootControl());return this._handlePersonalizationChangesOnStart().then(function(b1){if(!b1){if(!this.getPlugins()||!Object.keys(this.getPlugins()).length){this.setPlugins(this.getDefaultPlugins());}this._destroyDefaultPlugins(this.getPlugins());Object.keys(this.getPlugins()).forEach(function(e1){if(this.getPlugins()[e1].attachElementModified){this.getPlugins()[e1].attachElementModified(this._handleElementModified,this);}}.bind(this));if(this.getPlugins()["settings"]){this.getPlugins()["settings"].setCommandStack(this.getCommandStack());}this._buildContextMenu();var c1=Object.keys(this.getPlugins());var d1=c1.map(function(e1){return this.getPlugins()[e1];},this);q.sap.measure.start("rta.dt.startup","Measurement of RTA: DesignTime start up");this._oDesignTime=new D({rootElements:[this._oRootControl],plugins:d1});q(a.getOverlayContainer()).addClass("sapUiRta");if(this.getLayer()==="USER"){q(a.getOverlayContainer()).addClass("sapUiRtaPersonalize");}this._oDesignTime.attachSelectionChange(function(e1){this.fireSelectionChange({selection:e1.getParameter("selection")});},this);this._oDesignTime.attachEventOnce("synced",function(){this.fireStart({editablePluginsCount:this.iEditableOverlaysCount});q.sap.measure.end("rta.dt.startup","Measurement of RTA: DesignTime start up");},this);this._oDesignTime.attachEventOnce("syncFailed",function(){this.fireFailed();},this);this._$document=q(document);this.fnKeyDown=this._onKeyDown.bind(this);this._$document.on("keydown",this.fnKeyDown);this.oPopupManage.setRta(this);this._oldUnloadHandler=window.onbeforeunload;window.onbeforeunload=this._onUnload.bind(this);sap.ui.getCore().getEventBus().subscribe("sap.ushell.renderers.fiori2.Renderer","appClosed",this._onAppClosed,this);}return Promise.resolve(b1);}.bind(this)).then(function(b1){if(this.getShowToolbars()&&!b1){return u.getInstance(t.getComponentClassName(this._oRootControl)).then(function(c1){return!c1.isProductiveSystem()&&!c1.hasMergeErrorOccured();}).catch(function(c1){return false;}).then(function(c1){this._createToolsMenu(c1);return this._oToolsMenu.show();}.bind(this));}}.bind(this)).then(function(){var b1=this.oPopupManage.getRelevantPopups();if(b1.aDialogs||b1.aPopovers){return this._oToolsMenu.bringToFront();}return true;}.bind(this)).then(function(){z.loadStyles('InPageStyles').then(function(b1){var c1=b1.replace(/%scrollWidth%/g,y.getScrollbarWidth()+'px');y.insertStyles(c1);});return true;});}};
var I=function(b1){var c1=b1.stack||b1.message||b1.status||b1;var d1=sap.ui.getCore().getLibraryResourceBundle("sap.ui.rta");q.sap.log.error("Failed to transfer runtime adaptation changes to layered repository",c1);var e1=d1.getText("MSG_LREP_TRANSFER_ERROR")+"\n"+d1.getText("MSG_ERROR_REASON",c1);v.error(e1);};
H.prototype._onAppClosed=function(){this.stop(true,true);};
H.prototype.setCommandStack=function(b1){var c1=this.getProperty("commandStack");if(c1){c1.detachModified(this._onCommandStackModified);}if(this._oInternalCommandStack){this._oInternalCommandStack.destroy();delete this._oInternalCommandStack;}var d1=this.setProperty("commandStack",b1);if(b1){b1.attachModified(this._onCommandStackModified);}if(this.getPlugins()&&this.getPlugins()["settings"]){this.getPlugins()["settings"].setCommandStack(b1);}return d1;};
H.prototype.getCommandStack=function(){var b1=this.getProperty("commandStack");if(!b1){b1=new C();this._oInternalCommandStack=b1;this.setCommandStack(b1);}return b1;};
H.prototype._onStackModified=function(){var b1=this.getCommandStack();var c1=b1.canUndo();var d1=b1.canRedo();var e1=U.getUshellContainer();if(this.getShowToolbars()&&this._oToolsMenu){this._oToolsMenu.setUndoRedoEnabled(c1,d1);this._oToolsMenu.setPublishEnabled(this._bChangesExist||c1);this._oToolsMenu.setRestoreEnabled(this._bChangesExist||c1);}this.fireUndoRedoStackModified();if(e1){if(c1){e1.setDirtyFlag(true);}else{e1.setDirtyFlag(false);}}};
H.prototype._closeToolBars=function(){if(this.getShowToolbars()&&this._oToolsMenu){return this._oToolsMenu.hide();}else{return Promise.resolve();}};
H.prototype.getSelection=function(){if(this._oDesignTime){return this._oDesignTime.getSelection();}else{return[];}};
H.prototype.stop=function(b1,c1){return((b1)?Promise.resolve():this._serializeToLrep()).then(this._closeToolBars.bind(this)).then(c1?Promise.resolve():this._handlePersonalizationChangesOnExit.bind(this)).then(function(){this.exit();this.fireStop();}.bind(this))['catch'](I);};
H.prototype.restore=function(){this._onRestore();};
H.prototype.transport=function(){this._onTransport();};
H.prototype.undo=function(){this._onUndo();};
H.prototype.redo=function(){this._onRedo();};
H.prototype.canUndo=function(){return this.getCommandStack().canUndo();};
H.prototype.canRedo=function(){return this.getCommandStack().canRedo();};
H.prototype._onKeyDown=function(b1){var c1=sap.ui.Device.os.macintosh?b1.metaKey:b1.ctrlKey;if((b1.keyCode===q.sap.KeyCodes.Z)&&(b1.shiftKey===false)&&(b1.altKey===false)&&(c1===true)){this._onUndo();b1.stopPropagation();}else if((b1.keyCode===q.sap.KeyCodes.Y)&&(b1.shiftKey===false)&&(b1.altKey===false)&&(c1===true)){this._onRedo();b1.stopPropagation();}};
H.prototype._onUnload=function(){var b1=this.getCommandStack();var c1=b1.canUndo()||b1.canRedo();if(c1&&this.getShowWindowUnloadDialog()){var d1=this._getTextResources().getText("MSG_UNSAVED_CHANGES");return d1;}else{window.onbeforeunload=this._oldUnloadHandler;}};
H.prototype._serializeToLrep=function(){var b1=new L({commandStack:this.getCommandStack(),rootControl:this.getRootControl()});return b1.saveCommands();};
H.prototype._onUndo=function(){this._handleStopCutPaste();this.getCommandStack().undo();};
H.prototype._onRedo=function(){this._handleStopCutPaste();this.getCommandStack().redo();};
H.prototype._createToolsMenu=function(b1){if(!this._oToolsMenu){var c1;if(this.getLayer()==="USER"){c1=P;}else if(U.getFiori2Renderer()){c1=F;}else{c1=S;}if(this.getLayer()==="USER"){this._oToolsMenu=new c1({textResources:this._getTextResources(),exit:this.stop.bind(this,false,false),restore:this._onRestore.bind(this)});}else{this._oToolsMenu=new c1({modeSwitcher:this.getMode(),publishVisible:b1,textResources:this._getTextResources(),exit:this.stop.bind(this,false,false),transport:this._onTransport.bind(this),restore:this._onRestore.bind(this),undo:this._onUndo.bind(this),redo:this._onRedo.bind(this),modeChange:this._onModeChange.bind(this)});}this._checkChangesExist().then(function(d1){this._bChangesExist=d1;this._oToolsMenu.setPublishEnabled(d1);this._oToolsMenu.setRestoreEnabled(d1);}.bind(this));}};
H.prototype.exit=function(){if(this._oDesignTime){q(a.getOverlayContainer()).removeClass("sapUiRta");this._oDesignTime.destroy();this._oDesignTime=null;this._$document.off("keydown",this.fnKeyDown);this._destroyDefaultPlugins();this.setPlugins(null);}if(this._oToolsMenu){this._oToolsMenu.destroy();this._oToolsMenu=null;}this.setCommandStack(null);var b1=U.getUshellContainer();if(b1){b1.setDirtyFlag(false);}if(this.oPopupManage){this.oPopupManage.destroy();}window.onbeforeunload=this._oldUnloadHandler;sap.ui.getCore().getEventBus().unsubscribe("sap.ushell.renderers.fiori2.Renderer","appClosed",this._onAppClosed,this);};
H.prototype._onTransport=function(){var b1=function(c1){B.hide();if(c1.message!=='createAndApply failed'){t.log.error("transport error"+c1);return this._showMessage(v.Icon.ERROR,"HEADER_TRANSPORT_ERROR","MSG_TRANSPORT_ERROR",c1);}}.bind(this);this._handleStopCutPaste();return this._openSelection().then(this._checkTransportInfo).then(function(c1){if(c1){return this._serializeToLrep().then(function(){return this._getFlexController().getComponentChanges({currentLayer:this.getLayer()}).then(function(d1){if(d1.length>0){B.show(0);return this._createAndApplyChanges(d1).then(this._transportAllLocalChanges.bind(this,c1))['catch'](b1);}}.bind(this));}.bind(this))['catch'](I);}}.bind(this));};
H.prototype._checkTransportInfo=function(b1){if(b1&&b1.transport&&b1.packageName!=="$TMP"){return b1;}else{return false;}};
H.prototype._openSelection=function(){return new s().openTransportSelection(null,this._oRootControl);};
H.prototype._createAndApplyChanges=function(b1){return Promise.resolve().then(function(){function c1(d1){return d1&&d1.selector&&d1.selector.id;}b1.filter(c1).forEach(function(d1){var e1=sap.ui.getCore().byId(d1.selector.id);this._getFlexController().createAndApplyChange(d1,e1);});})['catch'](function(c1){t.log.error("Create and apply error: "+c1);return c1;}).then(function(c1){return this._getFlexController().saveAll().then(function(){if(c1){throw c1;}});}.bind(this))['catch'](function(c1){t.log.error("Create and apply and/or save error: "+c1);return this._showMessage(v.Icon.ERROR,"HEADER_TRANSPORT_APPLYSAVE_ERROR","MSG_TRANSPORT_APPLYSAVE_ERROR",c1);}.bind(this));};
H.prototype._deleteChanges=function(){var b1=new s();var c1=this.getLayer();this._getFlexController().getComponentChanges({currentLayer:c1}).then(function(d1){return u.getInstance(t.getComponentClassName(this._oRootControl)).then(function(e1){if(!e1.isProductiveSystem()&&!e1.hasMergeErrorOccured()){return b1.setTransports(d1,this._oRootControl);}}.bind(this)).then(function(){return this._getFlexController().discardChanges(d1,c1==="USER");}.bind(this)).then(function(){return window.location.reload();});}.bind(this))["catch"](function(d1){return this._showMessage(v.Icon.ERROR,"HEADER_RESTORE_FAILED","MSG_RESTORE_FAILED",d1);}.bind(this));};
H.prototype._showMessage=function(b1,c1,d1,e1){var f1=this._getTextResources().getText(d1,e1?[e1.message||e1]:undefined);var g1=this._getTextResources().getText(c1);return new Promise(function(h1){v.show(f1,{icon:b1,title:g1,onClose:h1});});};
H.prototype._showMessageToast=function(b1){var c1=this._getTextResources().getText(b1);w.show(c1);};
H.needsRestart=function(b1){var c1=!!window.localStorage.getItem("sap.ui.rta.restart."+b1);return c1;};
H.enableRestart=function(b1){window.localStorage.setItem("sap.ui.rta.restart."+b1,true);};
H.disableRestart=function(b1){window.localStorage.removeItem("sap.ui.rta.restart."+b1);};
H.prototype._onRestore=function(){var b1=this.getLayer()==="USER"?this._getTextResources().getText("FORM_PERS_RESET_MESSAGE_PERSONALIZATION"):this._getTextResources().getText("FORM_PERS_RESET_MESSAGE");var c1=this.getLayer()==="USER"?this._getTextResources().getText("BTN_RESTORE"):this._getTextResources().getText("FORM_PERS_RESET_TITLE");var d1=function(e1){if(e1==="OK"){this.getCommandStack().removeAllCommands();H.enableRestart(this.getLayer());this._deleteChanges();}}.bind(this);this._handleStopCutPaste();v.confirm(b1,{icon:v.Icon.WARNING,title:c1,onClose:d1});};
H.prototype._transportAllLocalChanges=function(b1){return this._getFlexController().getComponentChanges({currentLayer:this.getLayer()}).then(function(c1){var d1=new r();var e1=d1._convertToChangeTransportData(c1);var f1={};f1.package=b1.packageName;f1.transportId=b1.transport;f1.changeIds=e1;return d1.makeChangesTransportable(f1).then(function(){c1.forEach(function(g1){if(g1.getPackage()==='$TMP'){var h1=g1.getDefinition();h1.packageName=b1.packageName;g1.setResponse(h1);}});}).then(function(){B.hide();this._showMessageToast("MSG_TRANSPORT_SUCCESS");}.bind(this));}.bind(this));};
H.prototype._isEqualParentInfo=function(b1,c1){var d1=!!b1&&!!c1;if(d1&&(b1.parent&&c1.parent)){d1=b1.parent.getId()===c1.parent.getId();}if(d1&&(b1.index||c1.index)){d1=b1.index===c1.index;}if(d1&&(b1.aggregation||c1.aggregation)){d1=b1.aggregation===c1.aggregation;}return d1;};
H.prototype._handleElementModified=function(b1){this._handleStopCutPaste();var c1=b1.getParameter("command");if(c1 instanceof sap.ui.rta.command.BaseCommand){this.getCommandStack().pushAndExecute(c1);}};
H.prototype._onElementEditableChange=function(b1){var c1=b1.getParameter("editable");if(c1){this.iEditableOverlaysCount+=1;}else{this.iEditableOverlaysCount-=1;}};
H.prototype._handleRemoveElement=function(b1){this.getPlugins()["remove"].removeElement(b1);};
H.prototype._openSettingsDialog=function(b1){var c1=(b1.mParameters)?b1.getParameter("selectedOverlays"):b1;var d1=c1[0].getElementInstance();this._handleStopCutPaste();if(!this._oSettingsDialog){this._oSettingsDialog=new p();}this._oSettingsDialog.setCommandStack(this.getCommandStack());this._oSettingsDialog.open(d1);};
var J=function(b1){return this._oDesignTime.getSelection().length<2;};var K=function(b1){return b1.getMovable();};var N=function(b1){return this.getPlugins()["remove"].isRemoveAvailable(b1);};var Q=function(b1){return this.getPlugins()["remove"].isRemoveEnabled(b1);};var V=function(b1){return this.getPlugins()["rename"].isRenameAvailable(b1);};var W=function(b1){return this.getPlugins()["rename"].isRenameEnabled(b1);};var X=function(b1){return this.getPlugins()["settings"].isSettingsAvailable(b1);};var Y=function(b1){return this.getPlugins()["settings"].isSettingsEnabled(b1);};var Z=function(b1){return this.getPlugins()["combine"].isCombineAvailable(b1);};var $=function(b1){return this.getPlugins()["combine"].isCombineEnabled(b1);};var _=function(b1){return this.getPlugins()["split"].isSplitAvailable(b1);};var a1=function(b1){return this.getPlugins()["split"].isSplitEnabled(b1);};
H.prototype._buildContextMenu=function(){var b1=this.getPlugins()["contextMenu"];if(!b1){return;}var c1=this.getPlugins()["additionalElements"];var d1=this.getPlugins()["createContainer"];if(this.getPlugins()["rename"]){b1.addMenuItem({id:"CTX_RENAME_LABEL",text:this._getTextResources().getText("CTX_RENAME"),handler:this._handleRename.bind(this),available:V.bind(this),enabled:function(e1){return(J.call(this,e1)&&W.call(this,e1));}.bind(this)});}if(c1){b1.addMenuItem({id:"CTX_ADD_ELEMENTS_AS_SIBLING",text:c1.getContextMenuTitle.bind(c1,true),handler:c1.showAvailableElements.bind(c1,true),available:c1.isAvailable.bind(c1,true),enabled:function(e1){return J.call(this,e1)&&c1.isEnabled(true,e1);}.bind(this)});b1.addMenuItem({id:"CTX_ADD_ELEMENTS_AS_CHILD",text:c1.getContextMenuTitle.bind(c1,false),handler:c1.showAvailableElements.bind(c1,false),available:c1.isAvailable.bind(c1,false),enabled:function(e1){return J.call(this,e1)&&c1.isEnabled(false,e1);}.bind(this)});}if(d1){b1.addMenuItem({id:"CTX_CREATE_CHILD_CONTAINER",text:d1.getCreateContainerText.bind(d1,false),handler:this._createContainer.bind(this,false),available:d1.isCreateAvailable.bind(d1,false),enabled:d1.isCreateEnabled.bind(d1,false)});b1.addMenuItem({id:"CTX_CREATE_SIBLING_CONTAINER",text:d1.getCreateContainerText.bind(d1,true),handler:this._createContainer.bind(this,true),available:d1.isCreateAvailable.bind(d1,true),enabled:d1.isCreateEnabled.bind(d1,true)});}if(this.getPlugins()["remove"]){b1.addMenuItem({id:"CTX_REMOVE",text:this._getTextResources().getText("CTX_REMOVE"),handler:this._handleRemoveElement.bind(this),available:N.bind(this),enabled:Q.bind(this)});}b1.addMenuItem({id:"CTX_CUT",text:this._getTextResources().getText("CTX_CUT"),handler:this._handleCutElement.bind(this),available:K,enabled:function(){return this._oDesignTime.getSelection().length===1;}.bind(this)});if(this.getPlugins()["cutPaste"]){b1.addMenuItem({id:"CTX_PASTE",text:this._getTextResources().getText("CTX_PASTE"),handler:this._handlePasteElement.bind(this),available:K,enabled:function(e1){return this.getPlugins()["cutPaste"].isElementPasteable(e1);}.bind(this)});}b1.addMenuItem({id:"CTX_GROUP_FIELDS",text:this._getTextResources().getText("CTX_GROUP_FIELDS"),handler:this._handleCombineElements.bind(this),available:Z.bind(this),enabled:$.bind(this)});b1.addMenuItem({id:"CTX_UNGROUP_FIELDS",text:this._getTextResources().getText("CTX_UNGROUP_FIELDS"),handler:this._handleSplitElements.bind(this),available:_.bind(this),enabled:a1.bind(this)});if(this.getPlugins()["settings"]){b1.addMenuItem({id:"CTX_SETTINGS",text:this._getTextResources().getText("CTX_SETTINGS"),handler:this._handleSettings.bind(this),available:X.bind(this),enabled:Y.bind(this)});}};
H.prototype._createContainer=function(b1,c1){this._handleStopCutPaste();var d1=c1[0];var e1=this.getPlugins()["createContainer"].handleCreate(b1,d1);if(this.getPlugins()["rename"]){var f1={"onAfterRendering":function(){setTimeout(function(){this.getPlugins()["rename"].startEdit(e1);}.bind(this),0);e1.removeEventDelegate(f1);}.bind(this)};e1.addEventDelegate(f1);}};
H.prototype._handleRename=function(b1){var c1=b1[0];this.getPlugins()["rename"].startEdit(c1);};
H.prototype._handleCutElement=function(b1){var c1=b1[0];this.getPlugins()["cutPaste"].cut(c1);};
H.prototype._handlePasteElement=function(b1){var c1=b1[0];this.getPlugins()["cutPaste"].paste(c1);};
H.prototype._handleStopCutPaste=function(){this.getPlugins()["cutPaste"].stopCutAndPaste();};
H.prototype._handleCombineElements=function(){this._handleStopCutPaste();var b1=this.getPlugins()["contextMenu"].getContextElement();this.getPlugins()["combine"].handleCombine(b1);};
H.prototype._handleSplitElements=function(){this._handleStopCutPaste();var b1=this.getPlugins()["contextMenu"].getContextElement();this.getPlugins()["split"].handleSplit(b1);};
H.prototype._handleSettings=function(b1){this.getPlugins()["settings"].handleSettings(b1);};
H.prototype._getSmartFormForElement=function(b1){while(b1&&!E.isInstanceOf(b1,"sap.ui.comp.smartform.SmartForm")){b1=b1.getParent();}return b1;};
H.prototype._getApplicationTitle=function(){var b1="";var c1=sap.ui.core.Component.getOwnerComponentFor(this._oRootControl);if(c1){b1=c1.getMetadata().getManifestEntry("sap.app").title;}return b1;};
H.prototype._checkChangesExist=function(){if(this._getFlexController().getComponentName().length>0){return this._getFlexController().getComponentChanges({currentLayer:this.getLayer()}).then(function(b1){return b1.length>0;});}else{return Promise.resolve(false);}};
H.prototype._getURLParsedHash=function(){var b1=sap.ushell.Container.getService("URLParsing");if(b1.parseShellHash&&b1.getHash){return b1.parseShellHash(b1.getHash(window.location.href));}};
H.prototype._buildNavigationArguments=function(b1){return{target:{semanticObject:b1.semanticObject,action:b1.action,context:b1.contextRaw},params:b1.params,appSpecificRoute:b1.appSpecificRoute};};
H.prototype._hasCustomerLayerParameter=function(b1){return b1.params&&b1.params[G]&&b1.params[G][0]==="CUSTOMER";};
H.prototype._reloadWithoutPersonalizationChanges=function(b1,c1){if(!this._hasCustomerLayerParameter(b1)){if(!b1.params){b1.params={};}b1.params[G]=["CUSTOMER"];H.enableRestart("CUSTOMER");c1.toExternal(this._buildNavigationArguments(b1));return Promise.resolve(true);}};
H.prototype._reloadWithPersonalizationChanges=function(b1,c1){if(this._hasCustomerLayerParameter(b1)){delete b1.params[G];c1.toExternal(this._buildNavigationArguments(b1));return Promise.resolve(true);}};
H.prototype._handlePersonalizationMessageBoxOnStart=function(){return this._showMessage(v.Icon.INFORMATION,"HEADER_PERSONALIZATION_EXISTS","MSG_PERSONALIZATION_EXISTS");};
H.prototype._handlePersonalizationChangesOnStart=function(){var b1=U.getUshellContainer();if(b1&&this.getLayer()!=="USER"){var c1=this._getURLParsedHash();return this._getFlexController().isPersonalized({ignoreMaxLayerParameter:false}).then(function(d1){if(d1){return this._handlePersonalizationMessageBoxOnStart().then(function(){var e1=sap.ushell.Container.getService("CrossApplicationNavigation");if(e1.toExternal&&c1){return this._reloadWithoutPersonalizationChanges(c1,e1);}}.bind(this));}}.bind(this));}else{return Promise.resolve(false);}};
H.prototype._handlePersonalizationMessageBoxOnExit=function(){return new Promise(function(b1){var c1=this._getTextResources().getText("MSG_LOAD_PERSONALIZATION_CHANGES");var d1=this._getTextResources().getText("HEADER_LOAD_PERSONALIZATION_CHANGES");var e1=this._getTextResources().getText("MSG_PERSONALIZATION_CONFIRM_BUTTON_TEXT");var f1=this._getTextResources().getText("MSG_PERSONALIZATION_CANCEL_BUTTON_TEXT");var g1=function(h1){if(h1===e1){return b1(true);}else if(h1===f1){return b1(false);}};v.confirm(c1,{icon:v.Icon.QUESTION,title:d1,actions:[e1,f1],onClose:g1});}.bind(this));};
H.prototype._handlePersonalizationChangesOnExit=function(){var b1=U.getUshellContainer();sap.ui.getCore().getEventBus().unsubscribe("sap.ushell.renderers.fiori2.Renderer","appClosed",this._onAppClosed,this);if(b1&&this.getLayer()!=="USER"){return this._getFlexController().isPersonalized({ignoreMaxLayerParameter:true}).then(function(c1){if(c1){return this._handlePersonalizationMessageBoxOnExit().then(function(d1){if(d1){var e1=sap.ushell.Container.getService("CrossApplicationNavigation");var f1=this._getURLParsedHash();if(e1.toExternal&&f1){return this._reloadWithPersonalizationChanges(f1,e1);}}}.bind(this));}}.bind(this));}else{return Promise.resolve(false);}};
H.prototype._onModeChange=function(b1){this.setMode(b1.getParameter('key'));};
H.prototype.setMode=function(b1){if(this.getProperty('mode')!==b1){var c1=this._oToolsMenu.getControl('modeSwitcher');var d1=b1==='adaptation';if(c1){c1.setSelectedButton(c1.getItems().filter(function(e1){return e1.getKey()===b1;}).pop().getId());}this._oDesignTime.setEnabled(d1);this.getPlugins()['tabHandling'][d1?'_removeTabIndex':'_restoreTabIndex']();this.setProperty('mode',b1);if(b1==='navigation'&&this.oPopupManage.getRelevantPopups().aPopovers){q.sap.focus(this.oPopupManage.getRelevantPopups().aPopovers[0].oPopup.oContent);}else if(b1==='navigation'&&this.oPopupManage.getRelevantPopups().aDialogs){q.sap.focus(this.oPopupManage.getRelevantPopups().aDialogs[0].oPopup.oContent);}}};
return H;},true);
sap.ui.predefine('sap/ui/rta/command/AddODataProperty',['jquery.sap.global','sap/ui/rta/command/FlexCommand',"sap/ui/fl/Utils","sap/ui/fl/changeHandler/BaseTreeModifier"],function(q,F,a,B){"use strict";
var A=F.extend("sap.ui.rta.command.AddODataProperty",{metadata:{library:"sap.ui.rta",properties:{index:{type:"int"},newControlId:{type:"string"},bindingString:{type:"string"}}}});
A.prototype._getChangeSpecificData=function(){return{changeType:this.getChangeType(),index:this.getIndex(),newControlId:this.getNewControlId(),bindingPath:this.getBindingString()};};
return A;},true);
sap.ui.predefine('sap/ui/rta/command/BindProperty',['sap/ui/rta/command/FlexCommand',"sap/ui/fl/changeHandler/PropertyBindingChange","sap/ui/rta/Utils"],function(F,P,U){"use strict";
var B=F.extend("sap.ui.rta.command.BindProperty",{metadata:{library:"sap.ui.rta",properties:{propertyName:{type:"string"},newBinding:{type:"string",bindable:false},changeType:{type:"string",defaultValue:"propertyBindingChange"}},associations:{},events:{}}});
B.prototype.init=function(){this.setChangeHandler(P);};
B.prototype.bindProperty=function(n,b){if(n==="newBinding"){return this.setNewBinding(b.bindingString);}return F.prototype.bindProperty.apply(this,arguments);};
B.prototype._getChangeSpecificData=function(){var e=this.getElement();var s={changeType:this.getChangeType(),selector:{id:e.getId(),type:e.getMetadata().getName()},content:{property:this.getPropertyName(),newBinding:this.getNewBinding()}};return s;};
return B;},true);
sap.ui.predefine('sap/ui/rta/command/Combine',['sap/ui/rta/command/FlexCommand'],function(F){"use strict";
var C=F.extend("sap.ui.rta.command.Combine",{metadata:{library:"sap.ui.rta",properties:{source:{type:"any"},combineFields:{type:"any[]"}},associations:{},events:{}}});
C.prototype._getChangeSpecificData=function(){var f=[];this.getCombineFields().forEach(function(o){f.push(o.getId());});var s={changeType:this.getChangeType(),sourceControlId:this.getSource().getId(),combineFieldIds:f};return s;};
return C;},true);
sap.ui.predefine('sap/ui/rta/command/CreateContainer',['jquery.sap.global','sap/ui/rta/command/FlexCommand'],function(q,F){"use strict";
var C=F.extend("sap.ui.rta.command.CreateContainer",{metadata:{library:"sap.ui.rta",properties:{index:{type:"int"},newControlId:{type:"string"},label:{type:"string"}},associations:{},events:{}}});
C.prototype._getChangeSpecificData=function(f){var s={changeType:this.getChangeType(),index:this.getIndex(),newControlId:this.getNewControlId(),newLabel:this.getLabel()};return s;};
return C;},true);
sap.ui.predefine('sap/ui/rta/command/LREPSerializer',['sap/ui/base/ManagedObject','sap/ui/rta/command/Stack','sap/ui/fl/FlexControllerFactory'],function(M,C,F){"use strict";
var L=M.extend("sap.ui.rta.command.LREPSerializer",{metadata:{library:"sap.ui.rta",associations:{"rootControl":{type:"sap.ui.core.Control"}},properties:{"commandStack":{type:"object"}},aggregations:{}}});
L.prototype.saveCommands=function(){var c=this.getCommandStack();var r=sap.ui.getCore().byId(this.getRootControl());if(!r){throw new Error("Can't save commands without root control instance!");}var f=F.createForControl(r);var a=c.getAllExecutedCommands();a.forEach(function(o){f.addPreparedChange(o.getPreparedChange(),o.getAppComponent());});return f.saveAll().then(function(){jQuery.sap.log.info("UI adaptation successfully transfered changes to layered repository");this.getCommandStack().removeAllCommands();}.bind(this));};
return L;},true);
sap.ui.predefine('sap/ui/rta/command/Move',['jquery.sap.global','sap/ui/rta/command/FlexCommand'],function(q,F){"use strict";
var M=F.extend("sap.ui.rta.command.Move",{metadata:{library:"sap.ui.rta",properties:{movedElements:{type:"any[]"},target:{type:"any"},source:{type:"any"}},associations:{},events:{}}});
M.prototype._getChangeSpecificData=function(i){var s=i?this.getTarget():this.getSource();var t=i?this.getSource():this.getTarget();if(s.parent){s.id=s.parent.getId();delete s.parent;}if(t.parent){t.id=t.parent.getId();delete t.parent;}var S={changeType:this.getChangeType(),source:s,target:t,movedElements:[]};this.getMovedElements().forEach(function(m){S.movedElements.push({id:m.id||m.element.getId(),sourceIndex:i?m.targetIndex:m.sourceIndex,targetIndex:i?m.sourceIndex:m.targetIndex});});return S;};
M.prototype.prepare=function(l,d){F.prototype.prepare.apply(this,arguments);this._oPreparedUndoChange=this._createChangeFromData(this._getChangeSpecificData(true),l,d);};
M.prototype.undo=function(){this._applyChange(this._oPreparedUndoChange);};
return M;},true);
sap.ui.predefine('sap/ui/rta/command/Property',['sap/ui/rta/command/FlexCommand',"sap/ui/fl/changeHandler/PropertyChange","sap/ui/rta/Utils"],function(F,P,U){"use strict";
var a=F.extend("sap.ui.rta.command.Property",{metadata:{library:"sap.ui.rta",properties:{propertyName:{type:"string"},newValue:{type:"any"},semanticMeaning:{type:"string"},changeType:{type:"string",defaultValue:"propertyChange"}},associations:{},events:{}}});
a.prototype.init=function(){this.setChangeHandler(P);};
a.prototype._getChangeSpecificData=function(){var e=this.getElement();return{changeType:this.getChangeType(),selector:{id:e.getId(),type:e.getMetadata().getName()},content:{property:this.getPropertyName(),newValue:this.getNewValue(),semantic:this.getSemanticMeaning()}};};
return a;},true);
sap.ui.predefine('sap/ui/rta/command/Remove',['sap/ui/rta/command/FlexCommand'],function(F){"use strict";
var R=F.extend("sap.ui.rta.command.Remove",{metadata:{library:"sap.ui.rta",properties:{removedElement:{type:"any"}},associations:{},events:{}}});
R.prototype._getChangeSpecificData=function(){var e=this.getRemovedElement()||this.getElement();var s={changeType:this.getChangeType(),removedElement:{id:e.getId()}};return s;};
return R;},true);
sap.ui.predefine('sap/ui/rta/command/Rename',['jquery.sap.global','sap/ui/rta/command/FlexCommand'],function(q,F){"use strict";
var R=F.extend("sap.ui.rta.command.Rename",{metadata:{library:"sap.ui.rta",properties:{renamedElement:{type:"object"},newValue:{type:"string",defaultValue:"new text"}},associations:{},events:{}}});
R.prototype._getChangeSpecificData=function(){var s={changeType:this.getChangeType(),selector:{id:this.getElement().getId()},renamedElement:{id:this.getRenamedElement().getId()},value:this.getNewValue()};return s;};
return R;},true);
sap.ui.predefine('sap/ui/rta/command/Reveal',['sap/ui/rta/command/FlexCommand'],function(F){"use strict";
var R=F.extend("sap.ui.rta.command.Reveal",{metadata:{library:"sap.ui.rta",properties:{revealedElementId:{type:"string"},directParent:"object"}}});
R.prototype._getChangeSpecificData=function(){var s={changeType:this.getChangeType()};if(this.getRevealedElementId()){s.revealedElementId=this.getRevealedElementId();}return s;};
return R;},true);
sap.ui.predefine('sap/ui/rta/command/Settings',['sap/ui/rta/command/FlexCommand'],function(F){"use strict";
var S=F.extend("sap.ui.rta.command.Settings",{metadata:{library:"sap.ui.rta",properties:{content:{type:"any"}},associations:{},events:{}}});
S.prototype._getChangeSpecificData=function(f){var s={changeType:this.getChangeType(),content:this.getContent()};return s;};
S.prototype.execute=function(){if(this.getElement()){F.prototype.execute.apply(this,arguments);}};
S.prototype.undo=function(){if(this.getElement()){F.prototype.undo.apply(this,arguments);}};
return S;},true);
sap.ui.predefine('sap/ui/rta/command/Split',['sap/ui/rta/command/FlexCommand'],function(F){"use strict";
var S=F.extend("sap.ui.rta.command.Split",{metadata:{library:"sap.ui.rta",properties:{newElementIds:{type:"string[]"},source:{type:"any"},parentElement:{type:"any"}},associations:{},events:{}}});
S.prototype._getChangeSpecificData=function(){var s={newElementIds:this.getNewElementIds(),sourceControlId:this.getSource().getId(),changeType:this.getChangeType(),parentId:this.getParentElement().getId()};return s;};
return S;},true);
sap.ui.predefine('sap/ui/rta/command/Stack',['sap/ui/base/ManagedObject'],function(M){"use strict";
var S=M.extend("sap.ui.rta.command.Stack",{metadata:{library:"sap.ui.rta",properties:{},aggregations:{commands:{type:"sap.ui.rta.command.BaseCommand",multiple:true}},events:{modified:{}}}});
S.prototype._toBeExecuted=-1;
S.prototype._getCommandToBeExecuted=function(){return this.getCommands()[this._toBeExecuted];};
S.prototype.pushExecutedCommand=function(c){this.push(c,true);};
S.prototype.push=function(c,e){if(this._bUndoneCommands){this._bUndoneCommands=false;while(this._toBeExecuted>-1){this.pop();}}this.insertCommand(c,0);if(!e){this._toBeExecuted++;}this.fireModified();};
S.prototype.top=function(){return this.getCommands()[0];};
S.prototype.pop=function(){if(this._toBeExecuted>-1){this._toBeExecuted--;}return this.removeCommand(0);};
S.prototype.removeCommand=function(o,s){var r=this.removeAggregation("commands",o,s);this.fireModified();return r;};
S.prototype.removeAllCommands=function(s){var c=this.removeAllAggregation("commands",s);this._toBeExecuted=-1;this.fireModified();return c;};
S.prototype.isEmpty=function(){return this.getCommands().length===0;};
S.prototype.execute=function(){var c=this._getCommandToBeExecuted();if(c){try{c.execute();}catch(e){this.pop();throw(e);}this._toBeExecuted--;this.fireModified();}};
S.prototype._unExecute=function(){if(this.canUndo()){this._bUndoneCommands=true;this._toBeExecuted++;var c=this._getCommandToBeExecuted();if(c){c.undo();this.fireModified();}}};
S.prototype.canUndo=function(){return(this._toBeExecuted+1)<this.getCommands().length;};
S.prototype.undo=function(){this._unExecute();};
S.prototype.canRedo=function(){return!!this._getCommandToBeExecuted();};
S.prototype.redo=function(){this.execute();};
S.prototype.pushAndExecute=function(c){this.push(c);this.execute();};
S.prototype.getAllExecutedCommands=function(){var a=[];var c=this.getCommands();for(var i=c.length-1;i>this._toBeExecuted;i--){var s=this._getSubCommands(c[i]);a=a.concat(s);}return a;};
S.prototype._getSubCommands=function(c){var C=[];if(c.getCommands){c.getCommands().forEach(function(s){var a=this._getSubCommands(s);C=C.concat(a);},this);}else{C.push(c);}return C;};
return S;},true);
sap.ui.predefine('sap/ui/rta/plugin/Combine',['sap/ui/rta/plugin/Plugin','sap/ui/dt/Selection','sap/ui/dt/OverlayRegistry','sap/ui/rta/Utils'],function(P,S,O,U){"use strict";
var C=P.extend("sap.ui.rta.plugin.Combine",{metadata:{library:"sap.ui.rta",properties:{},associations:{},events:{}}});
C.prototype._isEditable=function(o){if(!U.getRelevantContainerDesigntimeMetadata(o)){return false;}var c=this._getCombineAction(o);if(c&&c.changeType&&c.changeOnRelevantContainer){return this.hasChangeHandler(c.changeType,o.getRelevantContainer())&&this.hasStableId(o);}else{return false;}};
C.prototype._getCombineAction=function(o){return o.getDesignTimeMetadata().getAction("combine",o.getElementInstance());};
C.prototype._checkForSameRelevantContainer=function(s){var e=[];var r=[];for(var i=0,n=s.length;i<n;i++){e[i]=s[i].getElementInstance();r[i]=s[i].getRelevantContainer();if(i>0){if((r[0]!==r[i])||(e[0].getMetadata().getName()!==e[i].getMetadata().getName())){return false;}}}return true;};
C.prototype.isCombineAvailable=function(o){var s=this.getDesignTime().getSelection();if(s.length<=1){return false;}return(this._isEditableByPlugin(o)&&this._checkForSameRelevantContainer(s));};
C.prototype.isCombineEnabled=function(o){var s=this.getDesignTime().getSelection();if(!this.isCombineAvailable(o)||s.length<=1){return false;}var a=s.map(function(b){return b.getElementInstance();});var A=s.every(function(b){var c=this._getCombineAction(b);if(!c){return false;}if(typeof c.isEnabled!=="undefined"){if(typeof c.isEnabled==="function"){return c.isEnabled(a);}else{return c.isEnabled;}}return true;},this);return A;};
C.prototype.handleCombine=function(c){var e=O.getOverlay(c);var d=e.getDesignTimeMetadata();var t=[];var s=this.getDesignTime().getSelection();for(var i=0;i<s.length;i++){var o=s[i].getElementInstance();t.push(o);}var a=this.getCommandFactory().getCommandFor(c,"combine",{source:c,combineFields:t},d);this.fireElementModified({"command":a});};
return C;},true);
sap.ui.predefine('sap/ui/rta/plugin/CreateContainer',['sap/ui/rta/plugin/Plugin','sap/ui/fl/Utils','sap/ui/rta/Utils','sap/ui/dt/OverlayRegistry'],function(P,F,R,O){"use strict";
var C=P.extend("sap.ui.rta.plugin.CreateContainer",{metadata:{library:"sap.ui.rta",properties:{},associations:{},events:{}}});
C.prototype._isEditable=function(o,b){if(b===undefined||b===null){return this._isEditableCheck(o,false)||this._isEditableCheck(o,true);}else{return this._isEditableCheck(o,b);}};
C.prototype._isEditableCheck=function(o,b){var e=false;var p=this._getParentOverlay(b,o);if(!p||!p.getParentElementOverlay()){return false;}e=this.checkAggregationsOnSelf(p,"createContainer");if(e){var a=F.getViewForControl(p.getElementInstance());return this.hasStableId(o)&&F.checkControlId(a);}else{return false;}};
C.prototype._getParentOverlay=function(s,o){var p;if(s){p=o.getParentElementOverlay();}else{p=o;}return p;};
C.prototype.getCreateAction=function(s,o){var p=this._getParentOverlay(s,o);var d=p.getDesignTimeMetadata();var a=d.getAggregationAction("createContainer",o.getElementInstance());return a[0];};
C.prototype.isCreateAvailable=function(s,o){return this._isEditable(o,s);};
C.prototype.isCreateEnabled=function(s,o){var a=this.getCreateAction(s,o);if(!a){return false;}if(a.isEnabled&&typeof a.isEnabled==="function"){var i=a.isEnabled;var p=this._getParentOverlay(s,o);return i.call(null,p.getElementInstance());}else{return true;}};
C.prototype._getCreatedContainerId=function(a,n){var i=n;if(a.getCreatedContainerId&&typeof a.getCreatedContainerId==="function"){var m=a.getCreatedContainerId;i=m.call(null,n);}return O.getOverlay(i);};
C.prototype._determineIndex=function(p,s,a,g){return R.getIndex(p,s,a,g);};
C.prototype._getText=function(a,e,d,t){if(!a){return t;}var c=d.getAggregationDescription(a.aggregation,e).singular;var T=sap.ui.getCore().getLibraryResourceBundle("sap.ui.rta");return T.getText(t,c);};
C.prototype.getCreateContainerText=function(s,o){var a=this.getCreateAction(s,o);var p=this._getParentOverlay(s,o);var d=p.getDesignTimeMetadata();var e=p.getElementInstance();var t="CTX_CREATE_CONTAINER";return this._getText(a,e,d,t);};
C.prototype._getContainerTitle=function(a,e,d){var t="TITLE_CREATE_CONTAINER";return this._getText(a,e,d,t);};
C.prototype.handleCreate=function(s,o){var a=this.getCreateAction(s,o);var p=this._getParentOverlay(s,o);var d=p.getDesignTimeMetadata();var t=p.getElementInstance();var v=F.getViewForControl(t);var S;if(s){S=o.getElementInstance();}var n=v.createId(jQuery.sap.uid());var g=d.getAggregation(a.aggregation).getIndex;var i=this._determineIndex(t,S,a.aggregation,g);var c=this.getCommandFactory().getCommandFor(t,"createContainer",{newControlId:n,label:this._getContainerTitle(a,t,d),index:i},d);this.fireElementModified({"command":c});var N=this._getCreatedContainerId(a,n);N.setSelected(true);return N;};
return C;},true);
sap.ui.predefine('sap/ui/rta/plugin/EasyAdd',['sap/ui/rta/plugin/additionalElements/AdditionalElementsPlugin'],function(A){"use strict";
var E=A.extend("sap.ui.rta.plugin.EasyAdd",{metadata:{library:"sap.ui.rta",properties:{},associations:{},events:{}}});
E.prototype.registerElementOverlay=function(o){this._oDelegate={"onAfterRendering":function(){var a=function(o){this.showAvailableElements(true,[o]);}.bind(this);var i;if(o.$().hasClass("sapUiRtaPersAdd")&&o.$().children(".sapUiRtaPersAddIconOuter").length<=0){i=o.getId()+"-AddButton";var h=jQuery("<div class='sapUiRtaPersAddIconOuter' draggable='true'> </div>");o._oAddButton=new sap.m.Button(i,{text:this.getContextMenuTitle(true,o),icon:"sap-icon://add",press:function(e){var o=sap.ui.getCore().byId(e.getSource().getId().replace("-AddButton",""));a(o);e.cancelBubble();}}).placeAt(h.get(0));o.$().append(h);h[0].addEventListener("mouseover",function(e){e.stopPropagation();var o=sap.ui.getCore().byId(e.fromElement.id);if(o&&o.getMetadata().getName()==="sap.ui.dt.ElementOverlay"){var p=o.getParentElementOverlay();p.$().removeClass("sapUiRtaOverlayHover");}});h[0].addEventListener("mouseleave",function(e){e.stopPropagation();var o=sap.ui.getCore().byId(e.toElement.id);if(o&&o.getMetadata().getName()==="sap.ui.dt.ElementOverlay"){var p=o.getParentElementOverlay();if(p.getMovable()){p.$().addClass("sapUiRtaOverlayHover");}}});h[0].addEventListener("dragstart",function(e){e.stopPropagation();e.preventDefault();});}o.removeEventDelegate(this._oDelegate,this);}};var c=o.getElementInstance();if(c.getMetadata().getName()==="sap.uxap.ObjectPageSection"&&this.hasStableId(o)){o.addStyleClass("sapUiRtaPersAdd");c.addStyleClass("sapUiRtaMarginBottom");}o.addEventDelegate(this._oDelegate,this);A.prototype.registerElementOverlay.apply(this,arguments);};
E.prototype.deregisterElementOverlay=function(o){var c=o.getElementInstance();if(c.getMetadata().getName()==="sap.uxap.ObjectPageSection"){o.removeStyleClass("sapUiRtaPersAdd");c.removeStyleClass("sapUiRtaMarginBottom");o.removeEventDelegate(this._oDelegate,this);if(o._oAddButton){o._oAddButton.destroy();}}};
return E;},true);
sap.ui.predefine('sap/ui/rta/plugin/EasyRemove',['sap/ui/rta/plugin/Remove'],function(R){"use strict";
var E=R.extend("sap.ui.rta.plugin.EasyRemove",{metadata:{library:"sap.ui.rta",properties:{},associations:{},events:{}}});
E.prototype.registerElementOverlay=function(o){this._oDelegate={"onAfterRendering":function(){var a=function(o){this._handleRemove([o]);}.bind(this);if(o.$().hasClass("sapUiRtaPersDelete")&&o.$().children(".sapUiRtaPersDeleteClick").length<=0){var i=o.getId()+"-DeleteIcon";var h=jQuery("<div class='sapUiRtaPersDeleteClick' draggable='true'> </div>");var H=jQuery("<div class='sapUiRtaPersDeleteIconOuter'> </div>");o._oDeleteIcon=new sap.ui.core.Icon(i,{src:"sap-icon://decline",press:function(e){var o=sap.ui.getCore().byId(e.getSource().getId().replace("-DeleteIcon",""));a(o);e.cancelBubble();},noTabStop:true}).placeAt(H.get(0));h.append(H);o.$().append(h);o._oDeleteIcon.attachBrowserEvent("contextmenu",function(e){e.stopPropagation();e.preventDefault();});h[0].addEventListener("dragstart",function(e){e.stopPropagation();e.preventDefault();});}o.removeEventDelegate(this._oDelegate,this);}};var c=o.getElementInstance();if(c.getMetadata().getName()==="sap.uxap.ObjectPageSection"&&this.hasStableId(o)){o.addStyleClass("sapUiRtaPersDelete");}o.addEventDelegate(this._oDelegate,this);R.prototype.registerElementOverlay.apply(this,arguments);};
E.prototype.deregisterElementOverlay=function(o){var c=o.getElementInstance();if(c.getMetadata().getName()==="sap.uxap.ObjectPageSection"){o.removeStyleClass("sapUiRtaPersDelete");o.removeEventDelegate(this._oDelegate,this);if(o._oDeleteIcon){o._oDeleteIcon.destroy();}}};
return E;},true);
sap.ui.predefine('sap/ui/rta/plugin/Remove',['sap/ui/rta/plugin/Plugin','sap/ui/rta/Utils','sap/ui/rta/command/CompositeCommand'],function(P,U,C){"use strict";
var R=P.extend("sap.ui.rta.plugin.Remove",{metadata:{library:"sap.ui.rta",properties:{},associations:{},events:{}}});
R.prototype.registerElementOverlay=function(o){o.attachBrowserEvent("keydown",this._onKeyDown,this);P.prototype.registerElementOverlay.apply(this,arguments);};
R.prototype._isEditable=function(o){var e=false;var E=o.getElementInstance();var p=U.getRelevantContainerDesigntimeMetadata(o);if(!p){return false;}var r=this._getRemoveAction(o);if(r&&r.changeType){if(r.changeOnRelevantContainer){E=o.getRelevantContainer();}e=this.hasChangeHandler(r.changeType,E);}if(e){return this.hasStableId(o);}return e;};
R.prototype._getRemoveAction=function(o){return o.getDesignTimeMetadata().getAction("remove",o.getElementInstance());};
R.prototype.isRemoveAvailable=function(o){return this._isEditableByPlugin(o);};
R.prototype.isRemoveEnabled=function(o){var a=this._getRemoveAction(o);if(!a){return false;}if(typeof a.isEnabled!=="undefined"){if(typeof a.isEnabled==="function"){return a.isEnabled(o.getElementInstance());}else{return a.isEnabled;}}return true;};
R.prototype._getConfirmationText=function(o){var a=this._getRemoveAction(o);if(a&&a.getConfirmationText){return a.getConfirmationText(o.getElementInstance());}};
R.prototype.deregisterElementOverlay=function(o){o.detachBrowserEvent("keydown",this._onKeyDown,this);P.prototype.deregisterElementOverlay.apply(this,arguments);};
R.prototype._onKeyDown=function(e){if(e.keyCode===jQuery.sap.KeyCodes.DELETE){e.stopPropagation();this.removeElement();}};
R.prototype.removeElement=function(o){var s;if(o){s=o;}else{var d=this.getDesignTime();s=d.getSelection();}if(s.length>0){this._handleRemove(s);}};
R.prototype._getRemoveCommand=function(r,d){return this.getCommandFactory().getCommandFor(r,"Remove",{removedElement:r},d);};
R.prototype._fireElementModified=function(c){if(c.getCommands().length){this.fireElementModified({"command":c});}};
R.prototype._handleRemove=function(s){var p=[];var c=new C();s.forEach(function(o){var a;var r=o.getElementInstance();var d=o.getDesignTimeMetadata();if(this.isRemoveEnabled(o)){var b=this._getConfirmationText(o);if(b){p.push(U.openRemoveConfirmationDialog(r,b).then(function(e){if(e){a=this._getRemoveCommand(r,d);c.addCommand(a);}}.bind(this)));}else{a=this._getRemoveCommand(r,d);c.addCommand(a);}}},this);if(p.length){Promise.all(p).then(function(){this._fireElementModified(c);}.bind(this));}else{this._fireElementModified(c);}};
return R;},true);
sap.ui.predefine('sap/ui/rta/plugin/Selection',['sap/ui/rta/plugin/Plugin','sap/ui/rta/Utils','sap/ui/fl/Utils'],function(P,U,F){"use strict";
var S=P.extend("sap.ui.rta.plugin.Selection",{metadata:{library:"sap.ui.rta",properties:{multiSelectionRequiredPlugins:{type:"string[]"}},associations:{},events:{elementEditableChange:{parameters:{editable:{type:"boolean"}}}}}});
S.prototype._checkDeveloperMode=function(o){if(o.getDesignTimeMetadata()){var d=this.getCommandFactory().getFlexSettings().developerMode;if(d&&this.hasStableId(o)){o.setEditable(true);o.setSelectable(true);this.fireElementEditableChange({editable:true});return true;}}return false;};
S.prototype.registerElementOverlay=function(o){if(!this._checkDeveloperMode(o)){o.attachEditableChange(this._onEditableChange,this);this._adaptSelectable(o);}o.attachBrowserEvent("click",this._selectOverlay,this);o.attachBrowserEvent("keydown",this._onKeyDown,this);o.attachBrowserEvent("mousedown",this._onMouseDown,this);};
S.prototype._onEditableChange=function(e){var o=e.getSource();this._adaptSelectable(o);};
S.prototype._adaptSelectable=function(o){var s=o.getEditable();if(o.getSelectable()!==s){o.setSelectable(s);this.fireElementEditableChange({editable:s});}};
S.prototype.deregisterElementOverlay=function(o){o.detachBrowserEvent("click",this._selectOverlay,this);o.detachBrowserEvent("keydown",this._onKeyDown,this);o.detachBrowserEvent("mousedown",this._onMouseDown,this);o.detachEditableChange(this._onEditableChange,this);};
S.prototype._setFocusOnOverlay=function(o,e){if(o&&o.getSelectable()){o.focus();e.stopPropagation();}};
S.prototype._onKeyDown=function(e){var o=U.getFocusedOverlay();if(e.keyCode===jQuery.sap.KeyCodes.ENTER){this._selectOverlay(e);}else if(e.keyCode===jQuery.sap.KeyCodes.ARROW_UP&&e.shiftKey===false&&e.altKey===false){if(o){var p=U.getFocusableParentOverlay(o);this._setFocusOnOverlay(p,e);e.preventDefault();}}else if(e.keyCode===jQuery.sap.KeyCodes.ARROW_DOWN&&e.shiftKey===false&&e.altKey===false){if(o){var f=U.getFirstFocusableDescendantOverlay(o);this._setFocusOnOverlay(f,e);e.preventDefault();}}else if(e.keyCode===jQuery.sap.KeyCodes.ARROW_LEFT&&e.shiftKey===false&&e.altKey===false){if(o){var b=U.getPreviousFocusableSiblingOverlay(o);this._setFocusOnOverlay(b,e);e.preventDefault();}}else if(e.keyCode===jQuery.sap.KeyCodes.ARROW_RIGHT&&e.shiftKey===false&&e.altKey===false){if(o){var n=U.getNextFocusableSiblingOverlay(o);this._setFocusOnOverlay(n,e);e.preventDefault();}}};
S.prototype._selectOverlay=function(e){var o=sap.ui.getCore().byId(e.currentTarget.id);var m=e.metaKey||e.ctrlKey;var t=e.target.className;if(o.getSelectable()&&t.indexOf("sapUiDtOverlay")>-1){if(m){this.getDesignTime().setSelectionMode(sap.ui.dt.SelectionMode.Multi);}o.setSelected(!o.getSelected());if(m){this.getDesignTime().setSelectionMode(sap.ui.dt.SelectionMode.Single);}e.preventDefault();e.stopPropagation();}};
S.prototype._onMouseDown=function(e){if(sap.ui.Device.browser.name=="ie"){var o=sap.ui.getCore().byId(e.currentTarget.id);if(o.getSelectable()){o.focus();e.stopPropagation();}else{o.getDomRef().blur();}}};
S.prototype.setDesignTime=function(d){if(this.getDesignTime()){this.getDesignTime().detachSelectionChange(this._onDesignTimeSelectionChange,this);}P.prototype.setDesignTime.apply(this,arguments);if(this.getDesignTime()){this.getDesignTime().attachSelectionChange(this._onDesignTimeSelectionChange,this);}};
S.prototype._onDesignTimeSelectionChange=function(e){if(this.getDesignTime().getSelectionMode()===sap.ui.dt.SelectionMode.Single){return;}var c=e.getParameter("selection")[e.getParameter("selection").length-1];var s=this.getDesignTime().getSelection();if(s&&s.length===1){c.setSelected(true);return;}if(!c||this.getDesignTime().getSelectionMode()===sap.ui.dt.SelectionMode.Single){return;}var m=_(s,this.getMultiSelectionRequiredPlugins())&&a(s);c.setSelected(m);};
function _(s,m){var b=m;s.forEach(function(o){var e=o.getEditableByPlugins();b=b.reduce(function(c,p){if(e.indexOf(p)!==-1){c.push(p);}return c;},[]);});return b.length>0;}
function a(s){var c=s[s.length-1];var p=s[s.length-2];var C=c.getRelevantContainer();var o=p.getRelevantContainer();return C===o;}
return S;},true);
sap.ui.predefine('sap/ui/rta/plugin/Settings',['sap/ui/rta/plugin/Plugin','sap/ui/rta/Utils'],function(P,U){"use strict";
var S=P.extend("sap.ui.rta.plugin.Settings",{metadata:{library:"sap.ui.rta",properties:{commandStack:{type:"any"}},associations:{},events:{}}});
S.prototype._isEditable=function(o){if(!U.getRelevantContainerDesigntimeMetadata(o)){return false;}var s=this._getSettingsAction(o);if(s&&s.handler){return this.hasStableId(o);}return false;};
S.prototype._getUnsavedChanges=function(i,c){var e;var u=this.getCommandStack().getAllExecutedCommands().filter(function(C){e=C.getElementId();if(e===i&&c.indexOf(C.getChangeType())>=0){return true;}}).map(function(C){return C.getPreparedChange();});return u;};
S.prototype._getSettingsAction=function(o){return o.getDesignTimeMetadata().getAction("settings",o.getElementInstance());};
S.prototype.isSettingsAvailable=function(o){return this._isEditableByPlugin(o);};
S.prototype.isSettingsEnabled=function(o){var a=this._getSettingsAction(o);if(!a){return false;}if(typeof a.isEnabled!=="undefined"){if(typeof a.isEnabled==="function"){return a.isEnabled(o.getElementInstance());}else{return a.isEnabled;}}return true;};
S.prototype.handleSettings=function(s){var o;var e=s[0].getElementInstance();return s[0].getDesignTimeMetadata().getAction("settings").handler(e,this._getUnsavedChanges.bind(this)).then(function(c){c.forEach(function(C){o=this.getCommandFactory().getCommandFor(C.selectorControl,"settings",C.changeSpecificData);this.fireElementModified({"command":o});},this);}.bind(this))['catch'](function(E){if(E){throw E;}});};
return S;},true);
sap.ui.predefine('sap/ui/rta/plugin/Split',['sap/ui/rta/plugin/Plugin','sap/ui/dt/Selection','sap/ui/dt/OverlayRegistry','sap/ui/rta/Utils','sap/ui/fl/Utils'],function(P,S,O,U,F){"use strict";
var a=P.extend("sap.ui.rta.plugin.Split",{metadata:{library:"sap.ui.rta",properties:{},associations:{},events:{}}});
a.prototype._isEditable=function(o){if(!U.getRelevantContainerDesigntimeMetadata(o)){return false;}var s=this._getSplitAction(o);if(s&&s.changeType&&s.changeOnRelevantContainer){return this.hasStableId(o)&&this.hasChangeHandler(s.changeType,o.getRelevantContainer());}else{return false;}};
a.prototype._getSplitAction=function(o){return o.getDesignTimeMetadata().getAction("split",o.getElementInstance());};
a.prototype.isSplitAvailable=function(o){if(!this._isEditableByPlugin(o)){return false;}var s=this.getDesignTime().getSelection();if(s.length!==1){return false;}var v=this._getSplitAction(o);var e=s[0].getElementInstance();if(v&&v.getControlsCount(e)<=1){return false;}return true;};
a.prototype.isSplitEnabled=function(o){var A=this._getSplitAction(o);if(!A||!this.isSplitAvailable(o)){return false;}var b=true;if(typeof A.isEnabled!=="undefined"){if(typeof A.isEnabled==="function"){b=A.isEnabled(o.getElementInstance());}else{b=A.isEnabled;}}return b;};
a.prototype.handleSplit=function(s){var p=s.getParent();var e=O.getOverlay(s);var d=e.getDesignTimeMetadata();var f=this._getSplitAction(e).getControlsCount(s);var v=F.getViewForControl(s);var n=[];for(var i=0;i<f-1;i++){n.push(v.createId(jQuery.sap.uid()));}var o=this.getCommandFactory().getCommandFor(s,"split",{newElementIds:n,source:s,parentElement:p},d);this.fireElementModified({"command":o});};
return a;},true);
sap.ui.predefine('sap/ui/rta/plugin/additionalElements/AddElementsDialog',['jquery.sap.global','sap/ui/rta/library','sap/ui/rta/Utils','sap/ui/dt/OverlayRegistry','sap/ui/base/ManagedObject','sap/ui/commons/Label','sap/ui/commons/LabelDesign','sap/m/Dialog','sap/ui/model/json/JSONModel','sap/m/SearchField','sap/m/Button','sap/m/Toolbar','sap/m/ToolbarSpacer','sap/ui/model/Filter','sap/ui/model/FilterOperator','sap/ui/rta/command/CommandFactory','sap/ui/rta/command/CompositeCommand','sap/m/List','sap/m/CustomListItem','sap/m/ListType','sap/m/ScrollContainer','sap/ui/model/Sorter','sap/ui/dt/ElementUtil','sap/m/VBox'],function(q,l,U,O,M,L,a,D,J,S,B,T,b,F,c,C,d,e,f,g,h,i,E,V){"use strict";
var A=M.extend("sap.ui.rta.plugin.additionalElements.AddElementsDialog",{metadata:{library:"sap.ui.rta",properties:{"customFieldEnabled":{type:"boolean",defaultValue:false},"title":{type:"string"}},events:{"opened":{},"openCustomField":{}}}});
A.prototype.init=function(){this._oTextResources=sap.ui.getCore().getLibraryResourceBundle("sap.ui.rta");this._bAscendingSortOrder=false;this._oDialog=new D().addStyleClass("sapUIRtaFieldRepositoryDialog");this._oDialog.setModel(new J({elements:[]}));var j=this._createContent();var k=this._createButtons();j.forEach(function(o){this._oDialog.addContent(o);},this);k.forEach(function(o){this._oDialog.addButton(o);},this);this._oDialog.setInitialFocus(this._oInput);};
A.prototype._createContent=function(){this._oInput=new S({width:"100%",liveChange:[this._updateModelFilter,this]}).addStyleClass("resourceListIF");var r=new B({text:"",icon:"sap-icon://sort",press:[this._resortList,this]});this._oCustomFieldButton=new B({text:"",icon:"sap-icon://add",tooltip:this._oTextResources.getText("BTN_FREP_CCF"),enabled:this.getCustomFieldEnabled(),press:[this._redirectToCustomFieldCreation,this]});this._oToolbarSpacer1=new b();this.oInputFields=new T({content:[this._oInput,r,this._oToolbarSpacer1,this._oCustomFieldButton]});var o=new L({design:a.Bold,tooltip:"{tooltip}",text:{parts:[{path:"label"},{path:"referencedComplexPropertyName"},{path:"duplicateComplexName"}],formatter:function(n,R,p){if(p&&R){n+=" ("+R+")";}return n;}}});var j=new L({text:{parts:[{path:"originalLabel"}],formatter:function(n){if(n){return this._oTextResources.getText("LBL_FREP",n);}return"";}.bind(this)},visible:{parts:[{path:"originalLabel"}],formatter:function(n){if(n){return true;}return false;}}});var v=new V();v.addItem(o);v.addItem(j);var s=new i("label",this._bAscendingSortOrder);this._oList=new e({mode:"MultiSelect",includeItemInSelection:true,growing:false,growingScrollToLoad:false}).setNoDataText(this._oTextResources.getText("MSG_NO_FIELDS"));var k=new f({type:g.Active,selected:"{selected}",content:[v]});this._oList.bindItems({path:"/elements",template:k,sorter:s});var m=new h({content:this._oList,vertical:true,horizontal:false}).addStyleClass("sapUIRtaCCDialogScrollContainer");return[this.oInputFields,m];};
A.prototype._createButtons=function(){var o=new B({text:this._oTextResources.getText("BTN_FREP_OK"),press:[this._submitDialog,this]});var j=new B({text:this._oTextResources.getText("BTN_FREP_CANCEL"),press:[this._cancelDialog,this]});return[o,j];};
A.prototype._submitDialog=function(){this._oDialog.close();this._fnResolve();};
A.prototype._cancelDialog=function(){this._oList.removeSelections();this._oDialog.close();this._fnReject();};
A.prototype.setElements=function(j){this._oDialog.getModel().setProperty("/elements",j);};
A.prototype.getElements=function(){return this._oDialog.getModel().getProperty("/elements");};
A.prototype.getSelectedElements=function(){return this._oDialog.getModel().getObject("/elements").filter(function(o){return o.selected;});};
A.prototype.open=function(o){return new Promise(function(r,j){this._fnResolve=r;this._fnReject=j;this._oDialog.oPopup.attachOpened(function(){this.fireOpened();}.bind(this));this._oDialog.open();}.bind(this));};
A.prototype._resortList=function(o){this._bAscendingSortOrder=!this._bAscendingSortOrder;var j=this._oList.getBinding("items");var s=[];s.push(new i("label",this._bAscendingSortOrder));j.sort(s);};
A.prototype._updateModelFilter=function(o){var v=o.getParameter("newValue");var j=this._oList.getBinding("items");if((typeof v)==="string"){var k=new F("label",c.Contains,v);var m=new F("originalLabel",c.Contains,v);var r=new F("referencedComplexPropertyName",c.Contains,v);var n=new F("duplicateComplexName",c.EQ,true);var p=new F({filters:[r,n],and:true});var s=new F({filters:[k,m,p],and:false});j.filter([s]);}else{j.filter([]);}};
A.prototype._redirectToCustomFieldCreation=function(o){this.fireOpenCustomField();this._oDialog.close();};
A.prototype.setTitle=function(t){M.prototype.setProperty.call(this,"title",t,true);this._oDialog.setTitle(t);};
A.prototype.setCustomFieldEnabled=function(j){M.prototype.setProperty.call(this,"customFieldEnabled",j,true);this._oCustomFieldButton.setEnabled(j);};
return A;},true);
sap.ui.predefine('sap/ui/rta/plugin/additionalElements/AdditionalElementsAnalyzer',['sap/ui/comp/odata/MetadataAnalyser','sap/ui/comp/smartfield/AnnotationHelper','sap/ui/core/StashedControlSupport','sap/ui/dt/ElementUtil','sap/ui/rta/Utils','sap/ui/rta/util/BindingsExtractor'],function(M,A,S,E,R,B){"use strict";var a=new A();
function _(P){if(P&&P.type){if(P.type.toLowerCase().indexOf("edm")!==0){return true;}}return false;}
function b(O,i){return O.reduce(function(j,P){var v=P;if(_(P)){v=i.getFieldsByComplexTypeName(P.type).map(function(C){C.bindingPath=P.name+"/"+C.name;C.entityName=P.entityName;C.referencedComplexPropertyName=P.fieldLabel?P.fieldLabel:P.name;return C;});}else{v.bindingPath=P.name;}return j.concat(v);},[]);}
function c(O,i){return O.filter(function(P){return P.visible;}).filter(function(P){var F=a.getFieldControlPath(P);if(F){var j=i.getBindingContext().getProperty(F);return j!==0;}return true;});}
function d(i){var j=i.getModel();var l;var D={property:[],navigationProperty:[],navigationEntityNames:[]};if(j){var t=j.getMetadata().getName();if(t==="sap.ui.model.odata.ODataModel"||t==="sap.ui.model.odata.v2.ODataModel"){l=j.getMetaModel().loaded().then(function(){var u=new M(j);var O=R.getBoundEntityType(i);var v=O.name;var w=u.getFieldsByEntityTypeName(v)||[];w=b(w,u);w=c(w,i);var N=[];if(O.navigationProperty){O.navigationProperty.forEach(function(x){var y=R.getEntityTypeByNavProperty(j,O,x.name);if(y&&y.name){if(N.indexOf(y.name)===-1){N.push(y.name);}}});}return{property:w||[],navigationProperty:O.navigationProperty||[],navigationEntityNames:N||[]};});}}return l||Promise.resolve(D);}
function e(O){return{selected:false,label:O.fieldLabel,referencedComplexPropertyName:O.referencedComplexPropertyName?O.referencedComplexPropertyName:"",duplicateComplexName:O.duplicateComplexName?O.duplicateComplexName:false,tooltip:O.quickInfo||O.fieldLabel,originalLabel:"",type:"odata",entityType:O.entityName,name:O.name,bindingPath:O.bindingPath};}
function f(D){var i=D.element;var j=D.action;return{selected:false,label:R.getLabelForElement(i,j.getLabel),tooltip:R.getLabelForElement(i,j.getLabel),referencedComplexPropertyName:i.referencedComplexPropertyName?i.referencedComplexPropertyName:"",duplicateComplexName:i.duplicateComplexName?i.duplicateComplexName:false,bindingPaths:i.bindingPaths,originalLabel:i.renamedLabel&&i.fieldLabel!==i.labelFromOData?i.labelFromOData:"",type:"invisible",element:i};}
function g(i,j){if(j){var l=R.getEntityTypeByPath(i.getModel(),i.getBindingContext().getPath());return E.findAllSiblingsInContainer(i,j).filter(function(t){return R.getEntityTypeByPath(t.getModel(),t.getBindingContext().getPath())===l;});}else{return[i];}}
function h(O){O.forEach(function(i,l,O){if(i["duplicateComplexName"]!==true){for(var j=l+1;j<O.length-1;j++){if(i.fieldLabel===O[j].fieldLabel){i["duplicateComplexName"]=true;O[j]["duplicateComplexName"]=true;}}}});return O;}
function k(i,O){return O.some(function(D){return D.fieldLabel===i.fieldLabel;});}
function m(I,j){I.bindingPaths=[];I.bindingContextPaths=[];var t=B.getBindings(I,j);for(var i=0,l=t.length;i<l;i++){if(t[i].getPath&&t[i].getPath()){if(I.bindingPaths.indexOf(t[i].getPath())===-1){I.bindingPaths.push(t[i].getPath());}}if(t[i].getContext&&t[i].getContext()){if(I.bindingContextPaths.indexOf(t[i].getContext().getPath())===-1){I.bindingContextPaths.push(t[i].getContext().getPath());}}}return I;}
function n(i){return Array.isArray(i)&&i.length>0;}
function o(i,N,j,l){var t=n(i)&&i.some(function(P){var v=P.trim().replace(/^\//gi,'').split('/');if(v.length>1){return N.indexOf(v.shift())!==-1;}});var u=l.some(function(C){C=C.match(/^\/?([A-Za-z0-9_]+)/)[0];return(j.indexOf(C)>=0);});return t||u;}
function p(i,O){return O.filter(function(D){return i.indexOf(D.bindingPath)!==-1;}).pop();}
function q(i,O){i.labelFromOData=O.fieldLabel;if(i.fieldLabel!==i.labelFromOData){i.renamedLabel=true;}if(O.referencedComplexPropertyName){i.referencedComplexPropertyName=O.referencedComplexPropertyName;}}
function r(i,O,N,j){var l=i.bindingPaths,t=i.bindingContextPaths,u;return(!n(l)||o(l,N,j,t)||((u=p(l,O))&&(q(i,u)||true)));}
var s={enhanceInvisibleElements:function(P,i){var j=P.getModel();var l=i.reveal;var t=i.addODataProperty;return Promise.resolve().then(function(){return d(P);}).then(function(D){var O=D.property;var u=D.navigationProperty.map(function(N){return N.name;});var v=D.navigationEntityNames;O=h(O);var w=[];var I=l.elements||[];I.forEach(function(x){var T=x.getMetadata().getName();var y=l.types[T].action;x=m(x,j);x.fieldLabel=R.getLabelForElement(x,y.getLabel);x.duplicateComplexName=k(x,O);var z=true;if(t&&O.length>0){z=r(x,O,u,v);}if(z){w.push({element:x,action:y});}});return w;}).then(function(u){return u.map(f);});},getUnboundODataProperties:function(i,j){var l=i.getModel();return Promise.resolve().then(function(){return d(i);}).then(function(D){var O=D.property;var t=g(i,j.relevantContainer);var u=[];t.forEach(function(i){u=u.concat(B.getBindings(i,l));});var F=j.action.filter?j.action.filter:function(){return true;};O=O.filter(function(v){var H=false;if(u){H=u.some(function(w){return!!w.getPath&&(w.getPath()===v.bindingPath);});}return!H&&F(j.relevantContainer,v);});O=h(O);return O;}).then(function(u){return u.map(e);});}};return s;});
sap.ui.predefine('sap/ui/rta/plugin/additionalElements/AdditionalElementsPlugin',["jquery.sap.global","sap/ui/rta/plugin/Plugin",'sap/ui/dt/ElementUtil','sap/ui/dt/OverlayRegistry','sap/ui/rta/Utils','sap/ui/core/StashedControlSupport','sap/ui/dt/ElementDesignTimeMetadata'],function(q,P,E,O,U,S,a){"use strict";
function _(s,o){var p,r=o.getRelevantContainer(),R=O.getOverlay(r);if(s){p=o.getParentElementOverlay();}else{p=o;}return{relevantContainerOverlay:R,parentOverlay:p,relevantContainer:r,parent:p.getElementInstance()};}
function b(p,C){return C.sParentAggregationName;}
function c(o,s){var I=E.getAggregation(o,s).filter(function(C){var m=O.getOverlay(C);if(o.getVisible&&!o.getVisible()){return C.getVisible&&sap.ui.rta.plugin.Plugin.prototype.hasStableId(m);}return C.getVisible&&!C.getVisible()&&sap.ui.rta.plugin.Plugin.prototype.hasStableId(m);});var l=S.getStashedControls(o.getId());return I.concat(l);}
var d=true,e=false;
function f(r,m,p,s){var n=[];var C;var l;if(m.addODataProperty){var o=m.aggregation;var D=m.addODataProperty.designTimeMetadata;C=D.getAggregationDescription(o,p);if(C){l=s?C.singular:C.plural;n.push(l);}}if(m.reveal){Object.keys(m.reveal.types).forEach(function(T){var u=m.reveal.types[T];C=u.designTimeMetadata.getName(p);if(C){l=s?C.singular:C.plural;n.push(l);}});}var N=n.reduce(function(u,v){if(u.indexOf(v)===-1){u.push(v);}return u;},[]);var t=sap.ui.getCore().getLibraryResourceBundle("sap.ui.rta");if(N.length===1){l=N[0];}else{l=t.getText("MULTIPLE_CONTROL_NAME");}return t.getText(r,l);}
function g(){return{designTimeMetadata:new a({data:{name:{singular:function(){return sap.uxap.i18nModel.getResourceBundle().getText("SECTION_CONTROL_NAME");},plural:function(){return sap.uxap.i18nModel.getResourceBundle().getText("SECTION_CONTROL_NAME_PLURAL");}},actions:{reveal:{changeType:"unstashControl",getAggregationName:b}}}}),action:{changeType:"unstashControl",getAggregationName:b}};}
var A=P.extend("sap.ui.rta.plugin.additionalElements.AdditionalElementsPlugin",{
metadata:{library:"sap.ui.rta",properties:{analyzer:"object",dialog:"object",commandFactory:"object"},associations:{},events:{}},
getContextMenuTitle:function(o,l){var p=_(o,l);var m=this._getActions(o,l);return f("CTX_ADD_ELEMENTS",m,p.parent,d);},
isAvailable:function(o,l){return this._isEditable(l,o);},
isEnabled:function(o,l){var p;if(o){p=l.getParentElementOverlay();if(p&&this.hasStableId(p)){return true;}else{return false;}}var m=this._getActions(o,l);if(m.reveal&&m.reveal.elements.length===0&&!m.addODataProperty){return false;}return true;},
_getRevealActions:function(s,o){var p=_(s,o);var r=this._getTypes(r,p,s,o);return r;},
_getTypes:function(r,p,s,o){var l=[p.parentOverlay];var R=o.getRelevantContainer();if(R!==p.parent){l=E.findAllSiblingsInContainer(p.parent,R).map(function(n){return O.getOverlay(n);});}var m;if(s){m=[o.getParentAggregationOverlay().getAggregationName()];}else{m=p.parentOverlay.getAggregationOverlays().filter(function(n){return!n.getDesignTimeMetadata().isIgnored(p.parent);}).map(function(n){return n.getAggregationName();});}r=m.reduce(this._getRevealActionFromAggregations.bind(this,l),{});return r;},
_getRevealActionFromAggregations:function(p,l,s){var I=p.reduce(function(m,o){return o?m.concat(c(o.getElementInstance(),s)):m;},[]);var C=function(t,o){var T=o.getMetadata().getName();if(!t[T]){if(T==="sap.ui.core._StashedControl"){t[T]=g();}else{var m=O.getOverlay(o);if(m){var D=m.getDesignTimeMetadata();var r=D&&D.getAction("reveal",o);if(r&&r.changeType){if(r.changeOnRelevantContainer){o=m.getRelevantContainer();}if(this.hasChangeHandler(r.changeType,o)){if(!r.getAggregationName){r.getAggregationName=b;}t[T]={designTimeMetadata:D,action:r};}}}}}return t;};var t=I.reduce(C.bind(this),{});I=I.filter(function(o){return!!t[o.getMetadata().getName()];});if(I.length>0&&Object.keys(t).length>0){l[s]={reveal:{elements:I,types:t}};}return l;},
_getAddODataPropertyActions:function(s,o){var p=_(s,o);var D=p.parentOverlay.getDesignTimeMetadata();var l=D.getAggregationAction("addODataProperty",p.parent);var C=function(n,r){if(r.changeType&&this.hasChangeHandler(r.changeType,p.parent)){n[r.aggregation]={addODataProperty:{designTimeMetadata:D,action:r}};}return n;};var m=l.reduce(C.bind(this),{});return m;},
_getActions:function(s,o){var r=this._getRevealActions(s,o);var m=this._getAddODataPropertyActions(s,o);var l=q.extend(true,r,m);var n=Object.keys(l);if(n.length===0){return{};}else if(n.length>1){q.sap.log.error("reveal or addODataProperty action defined for more than 1 aggregation, that is not yet possible");}var p=n[0];l[p].aggregation=p;return l[p];},
_hasRevealActionsOnChildren:function(o){var r=this._getRevealActions(false,o);return!!r&&Object.keys(r).length>0;},
showAvailableElements:function(o,l,I){var m=l[0];var p=_(o,m);var s=o&&m.getElementInstance();var n=[];var r=this._getActions(o,m);if(r.reveal){n.push(this.getAnalyzer().enhanceInvisibleElements(p.parent,r));}if(r.addODataProperty){r.addODataProperty.relevantContainer=m.getRelevantContainer();n.push(this.getAnalyzer().getUnboundODataProperties(p.parent,r.addODataProperty));}if(r.aggregation){this._setDialogTitle(r,p.parent);}return Promise.resolve().then(function(){if(r.addODataProperty){return U.isServiceUpToDate(p.parent);}}).then(function(){if(r.addODataProperty){return U.isCustomFieldAvailable(p.parent);}}).then(function(C){if(C){this._oCurrentFieldExtInfo=C;this.getDialog().setCustomFieldEnabled(true);this.getDialog().detachEvent('openCustomField',this._onOpenCustomField,this);this.getDialog().attachEvent('openCustomField',null,this._onOpenCustomField,this);}}.bind(this)).then(i.bind(null,n)).then(function(t){this.getDialog().setElements(t);return this.getDialog().open().then(function(){this._createCommands(o,m,p,s,r.designTimeMetadata,r,I);}.bind(this)).catch(function(u){if(u instanceof Error){throw u;}});}.bind(this)).catch(function(t){if(t instanceof Error){throw t;}else{q.sap.log.info("Service not up to date, skipping add dialog","sap.ui.rta");}});},
_setDialogTitle:function(m,p){var D=f("HEADER_ADDITIONAL_ELEMENTS",m,p,e);this.getDialog().setTitle(D);},
_onOpenCustomField:function(o){var C=sap.ushell&&sap.ushell.Container&&sap.ushell.Container.getService("CrossApplicationNavigation");var H=(C&&C.hrefForExternal({target:{semanticObject:"CustomField",action:"develop"},params:{businessContexts:this._oCurrentFieldExtInfo.BusinessContexts,serviceName:this._oCurrentFieldExtInfo.ServiceName,serviceVersion:this._oCurrentFieldExtInfo.ServiceVersion,entityType:this._oCurrentFieldExtInfo.EntityType}}));U.openNewWindow(H);},
_createCommands:function(s,o,p,l,D,m,I){var n=this.getDialog().getSelectedElements();if(n.length>0){var C=this.getCommandFactory().getCommandFor(p.parent,"composite");n.forEach(function(r){var t;switch(r.type){case"invisible":t=this._createRevealCommandForInvisible(r,m,p,l);C.addCommand(t);t=this._createMoveCommandForInvisible(r,m,p,l,I);if(t){C.addCommand(t);}else{q.sap.log.warning("No move action configured for "+p.parent.getMetadata().getName()+", aggregation: "+m.aggregation,"sap.ui.rta");}break;case"odata":t=this._createCommandsForOData(r,m,p,l,I);C.addCommand(t);break;default:}},this);this.fireElementModified({"command":C});}},
_createCommandsForOData:function(s,m,p,o,I){var l=p.parentOverlay.getAggregationOverlay(m.aggregation);var n=l.getDesignTimeMetadata();var r=U.getIndex(p.parent,o,m.aggregation,n.getData().getIndex);return this.getCommandFactory().getCommandFor(p.parent,"addODataProperty",{newControlId:U.createFieldLabelId(p.parent,s.entityType,s.bindingPath),index:I!==undefined?I:r,bindingString:s.bindingPath},n);},
_createRevealCommandForInvisible:function(s,m,p,o){var r=s.element;var t=r.getMetadata().getName();var T=m.reveal.types[t];var D=T.designTimeMetadata;if(D.getAction("reveal").changeOnRelevantContainer){return this.getCommandFactory().getCommandFor(r,"reveal",{revealedElementId:r.getId(),directParent:p.parent},D);}else{return this.getCommandFactory().getCommandFor(r,"reveal",{},D);}},
_createMoveCommandForInvisible:function(s,m,p,o,I){var r=s.element;var t=r.getMetadata().getName();var T=m.reveal.types[t];var l=T.action.getAggregationName(p.parent,r);var n=j(r,p);var u=p.parent;var R=U.getIndex(p.parent,o,l);var v=U.getIndex(n,r,l)-1;R=I!==undefined?I:k(n,u,v,R);var C;if(R!==v||p.parent!==r.getParent()){var w=O.getOverlay(r)?O.getOverlay(r).getParentAggregationOverlay():p.relevantContainerOverlay;var x=w.getDesignTimeMetadata();C=this.getCommandFactory().getCommandFor(p.relevantContainer,"move",{movedElements:[{element:r,sourceIndex:v,targetIndex:R}],source:{publicParent:p.relevantContainer,parent:n,aggregation:l},target:{publicParent:p.relevantContainer,parent:u,aggregation:l}},x);}return C;},
_isEditable:function(o,l){if(l===undefined||l===null){return h.call(this,o,true)||h.call(this,o,false);}else{return h.call(this,o,l);}}
});
function h(o,l){var m=false;var r=U.getRelevantContainerDesigntimeMetadata(o);if(!r){return false;}var n=this._getActions(l,o);var p=_(l,o);if(n.addODataProperty){var s=n.addODataProperty.action;m=s&&s.aggregation===o.getParentAggregationOverlay().getAggregationName();}if(!m&&n.reveal){m=true;}if(!m&&!l){m=this._hasRevealActionsOnChildren(o);}if(!m){m=this.checkAggregationsOnSelf(p.parentOverlay,"addODataProperty");}if(m){return this.hasStableId(o);}else{return false;}}
function i(p){return Promise.all(p).then(function(l){var m=l[0]||[];if(m&&l[1]){m=m.concat(l[1]);}return m;});}
function j(r,p){var o=r.getParent();if(!o&&r.sParentId){o=sap.ui.getCore().byId(r.sParentId);}else if(!o){o=p.parent;}return o;}
function k(s,t,l,T){if(s===t&&l<T&&l>-1){return T-1;}return T;}
return A;});
sap.ui.predefine('sap/ui/rta/ui/SettingsDialog',['jquery.sap.global','sap/ui/rta/library','sap/ui/core/Control','sap/m/Dialog','sap/ui/layout/VerticalLayout','sap/m/Label','sap/m/Input','sap/m/Select','sap/ui/core/Item','sap/m/Button','sap/m/CheckBox','sap/ui/rta/command/CommandFactory','sap/ui/rta/command/CompositeCommand','sap/ui/dt/ElementUtil'],function(q,l,C,D,V,L,I,S,a,B,b,c,d,E){"use strict";
var e=C.extend("sap.ui.rta.ui.SettingsDialog",{metadata:{library:"sap.ui.rta",properties:{"commandStack":{type:"sap.ui.core.Control"}},associations:{"element":{type:"sap.ui.core.Element"}}}});
e.prototype.init=function(){this._oTextResources=sap.ui.getCore().getLibraryResourceBundle("sap.ui.rta");this._oDialog=this._createDialog();};
e.prototype._createDialog=function(){return new D({title:this._oTextResources.getText("HEADER_SETTINGS"),contentHeight:"500px",draggable:true,buttons:[new B({text:this._oTextResources.getText("BTN_FREP_OK"),press:[this._applyChangesAndClose,this]}),new B({text:this._oTextResources.getText("BTN_FREP_CANCEL"),press:[this._cancelDialog,this]})]}).addStyleClass("sapUiPopupWithPadding").addStyleClass("sapUiSizeCompact");};
e.prototype._applyChangesAndClose=function(){this._applyChanges();this._oDialog.close();};
e.prototype._iterateExecutedCommands=function(f){Object.keys(this._mCommands).forEach(function(p){f(this._mCommands[p]);},this);};
e.prototype._applyChanges=function(){var o=new d();this._iterateExecutedCommands(function(f){o.addCommand(f);});if(o.getCommands().length){this.getCommandStack().pushExecutedCommand(o);}};
e.prototype._cancelDialog=function(){this._iterateExecutedCommands(function(o){o.undo();});this._oDialog.close();};
e.prototype._executePropertyChangeCommand=function(o,p,n,O){if(!this._mCommands[p]){var P=c.getCommandFor(o,"property",{propertyName:p,newValue:n,oldValue:O});this._mCommands[p]=P;P.execute();}else{this._mCommands[p].undo();delete this._mCommands[p];}};
e.prototype._createBooleanEditor=function(o,p,P){var f=new b({text:p,selected:P});f.attachSelect(function(g){var n=g.getParameter("selected");var O=!n;this._executePropertyChangeCommand(o,p,n,O);},this);return f;};
e.prototype._createStringEditor=function(o,p,P){var i=new I({value:P});i.attachChange(function(f){var n=f.getParameter("value");var O=P;this._executePropertyChangeCommand(o,p,n,O);},this);return i;};
e.prototype._createEnumEditor=function(o,p,P,v){var s=new S();Object.keys(p).forEach(function(k){s.addItem(new a({text:k,key:p[k]}));});s.setSelectedKey(v);s.attachChange(function(f){var i=f.getParameter("selectedItem");if(i){var n=i.getKey();var O=v;this._executePropertyChangeCommand(o,P,n,O);}},this);return s;};
e.prototype._updateDialogContent=function(o){this._oDialog.removeAllContent();var v=new V();var p=o.getMetadata().getAllProperties();Object.keys(p).forEach(function(P){var f;var g=p[P];var h=o[g._sGetter]();if(g.type==="boolean"){f=this._createBooleanEditor(o,P,h);v.addContent(f);}else if(g.type==="string"||g.type==="sap.ui.core.CSSSize"){f=new V();var i=this._createStringEditor(o,P,h);f.addContent(new L({text:P,labelFor:i.getId()}));f.addContent(i);f.addStyleClass("sapUiRtaDialogEntryWithMargin");}else{var j=q.sap.getObject(g.type);if(j){f=new V();var k=this._createEnumEditor(o,j,P,h);f.addContent(new L({text:P,labelFor:k.getId()}));f.addContent(k);f.addStyleClass("sapUiRtaDialogEntryWithMargin");}}if(f){v.addContent(f);}},this);this._oDialog.addContent(v);};
e.prototype.open=function(o){this._mCommands={};this._updateDialogContent(o);this._oDialog.open();};
return e;},true);
sap.ui.predefine('sap/ui/rta/util/FakeLrepConnectorLocalStorage',["sap/ui/rta/util/FakeLrepLocalStorage"],function(F){"use strict";var a={};
a.create=function(c){if(Array.isArray(c)){c.forEach(function(e){F.saveChange(e.fileName,e);});}else{F.saveChange(c.fileName,c);}return Promise.resolve();};
a.deleteChange=function(c){F.deleteChange(c.sChangeName);return Promise.resolve({response:undefined,status:"nocontent"});};
a.deleteChanges=function(){F.deleteChanges();return Promise.resolve({response:undefined,status:"nocontent"});};
a.loadChanges=function(c){var C=F.getChanges(),i=this.sInitialComponentJsonPath;return new Promise(function(r,b){jQuery.getJSON(i).done(function(R){R.changes=C;var d={changes:R,componentClassName:c};r(d);}).fail(function(e){b(e);});});};
return a;},true);
sap.ui.predefine('sap/ui/rta/util/FakeLrepLocalStorage',[],function(){"use strict";var R="sap.ui.rta.change";var F={};
F.createChangeKey=function(i){if(i){return R+"."+i;}};
F.forEachLrepChangeInLocalStorage=function(p){for(var k in window.localStorage){if(k.indexOf(R)>-1){p(k);}}};
F.getChange=function(i){if(i){var c=window.localStorage.getItem(this.createChangeKey(i));return JSON.parse(c);}};
F.getChanges=function(){var c=[],C;this.forEachLrepChangeInLocalStorage(function(k){C=JSON.parse(window.localStorage[k]);c.push(C);});return c;};
F.getNumChanges=function(){var c=0;this.forEachLrepChangeInLocalStorage(function(k){c++;});return c;};
F._aModifyCallbacks=[];
F.attachModifyCallback=function(c){this._aModifyCallbacks.push(c);};
F.detachModifyCallback=function(c){var i=this._aModifyCallbacks.indexOf(c);if(i!==-1){this._aModifyCallbacks.splice(i,1);}};
F._callModifyCallbacks=function(){this._aModifyCallbacks.forEach(function(c){c();});};
F.deleteChange=function(i){if(i){window.localStorage.removeItem(this.createChangeKey(i));}this._callModifyCallbacks();};
F.deleteChanges=function(){this.forEachLrepChangeInLocalStorage(function(k){window.localStorage.removeItem(k);});this._callModifyCallbacks();};
F.saveChange=function(i,c){if(i&&c){var C=this.createChangeKey(i),s=JSON.stringify(c);window.localStorage.setItem(C,s);}this._callModifyCallbacks();};
return F;},true);
sap.ui.predefine('sap/ui/rta/util/PopupManager',['jquery.sap.global','sap/ui/base/ManagedObject','sap/m/Dialog','sap/m/Popover','sap/m/InstanceManager','sap/ui/core/Popup','sap/ui/dt/OverlayRegistry','sap/ui/fl/Utils','sap/ui/core/Component'],function(q,M,D,P,I,a,O,U,C){"use strict";
var b=M.extend("sap.ui.rta.util.PopupManager",{metadata:{properties:{rta:"any"},events:{open:{parameters:{oControl:{type:"sap.ui.core.Control"}}},close:{parameters:{oControl:{type:"sap.ui.core.Control"}}}},library:"sap.ui.rta"}});
b.prototype._overrideInstanceFunctions=function(){this._applyPopupMethods(this._createPopupOverlays);this._overrideAddPopupInstance();this._overrideRemovePopupInstance();};
b.prototype.getRelevantPopups=function(){var o,c;o=c=[];o=I.getOpenDialogs();c=I.getOpenPopovers();var r={aDialogs:this._getValidatedPopups(o),aPopovers:this._getValidatedPopups(c)};return r;};
b.prototype._getValidatedPopups=function(o){if(o.length>0){o.forEach(function(p,i){if(!this._getSupportedPopup(p)||(this.oRtaRootAppComponent!==this._getAppComponentForControl(p)&&!this._getComponentInsidePopup(p))){o.splice(i,1);}}.bind(this));}return(o.length>0)?o:false;};
b.prototype._getComponentInsidePopup=function(p){return p.getContent().some(function(c){if(c.getMetadata().getName()==="sap.ui.core.ComponentContainer"){return this.oRtaRootAppComponent===this._getAppComponentForControl(sap.ui.getCore().getComponent(c.getComponent()));}}.bind(this));};
b.prototype._getSupportedPopup=function(p){return(p instanceof sap.m.Dialog||p instanceof sap.m.Popover);};
b.prototype.setRta=function(r){if(r&&r._oDesignTime){this.setProperty("rta",r);var R=sap.ui.getCore().byId(r.getRootControl());this.oRtaRootAppComponent=this._getAppComponentForControl(R);this._overrideInstanceFunctions();}};
b.prototype._overrideAddPopupInstance=function(){this._fnOriginalAddDialogInstance=I.addDialogInstance;I.addDialogInstance=this._overrideAddFunctions(this._fnOriginalAddDialogInstance);this._fnOriginalAddPopoverInstance=I.addPopoverInstance;I.addPopoverInstance=this._overrideAddFunctions(this._fnOriginalAddPopoverInstance);};
b.prototype._overrideAddFunctions=function(o){var t=this;return function(p){var v=o.apply(this,arguments);if(t.getRta()._oDesignTime&&t.oRtaRootAppComponent===t._getAppComponentForControl(p)&&t._getSupportedPopup(p)){p.attachAfterOpen(t._createPopupOverlays,t);t.fireOpen(p);}return v;};};
b.prototype._applyPopupMethods=function(p){var r=this.getRelevantPopups();Object.keys(r).forEach(function(k){if(r[k]){r[k].forEach(function(o){p.call(this,o);}.bind(this));}}.bind(this));};
b.prototype.modifyBrowserEvents=function(p){var o=p.oPopup;this.fnPopupOriginalAfterRendering=o.onAfterRendering;var t=this;o.onAfterRendering=function(){var v=t.fnPopupOriginalAfterRendering.apply(this,arguments);t._removeDefaultBlurEvents.call(this);return v;};this._removeDefaultBlurEvents.call(o);o._bOriginalAutoClose=o.getAutoClose();this.fnBlurHandling=this._blurHandling.bind(p,this.getRta());if(p instanceof sap.m.Popover){o.oContent.getDomRef().addEventListener("blur",this.fnBlurHandling,true);}};
b.prototype._removeDefaultBlurEvents=function(){this.oContent.getDomRef().removeEventListener("blur",this.fEventHandler,true);this.oLastBlurredElement=new sap.ui.core.Control();};
b.prototype._blurHandling=function(r,e){this.oPopup.setAutoClose(false);if(r.getMode()==='adaptation'){return;}q.sap.delayedCall(0,this,function(){if(document.activeElement&&q.sap.containsOrEquals(r._oToolsMenu.getDomRef(),document.activeElement)){q.sap.focus(this.oPopup.oContent);return;}if(q.sap.containsOrEquals(this.oPopup.oContent.getDomRef(),document.activeElement)){return;}this.oPopup.close(0,"autocloseBlur");});};
b.prototype._overrideRemovePopupInstance=function(){this._fnOriginalRemoveDialogInstance=I.removeDialogInstance;I.removeDialogInstance=this._overrideRemoveFunctions(this._fnOriginalRemoveDialogInstance);this._fnOriginalRemovePopoverInstance=I.removePopoverInstance;I.removePopoverInstance=this._overrideRemoveFunctions(this._fnOriginalRemovePopoverInstance);};
b.prototype._overrideRemoveFunctions=function(o){var t=this;return function(p){var v=o.apply(this,arguments);if(t.getRta()._oDesignTime&&t.oRtaRootAppComponent===t._getAppComponentForControl(p)&&t._getSupportedPopup(p)){t.getRta()._oDesignTime.removeRootElement(p);t.fireClose(p);}return v;};};
b.prototype._getAppComponentForControl=function(c){var o,A;if(c instanceof sap.ui.core.Component){o=c;}else{o=this._getComponentForControl(c);}if(o){A=U.getAppComponentForControl(o);}return A;};
b.prototype._getComponentForControl=function(c){var o,i=0;do{i++;o=C.getOwnerComponentFor(c);if(o){return o;}if(c&&typeof c.getParent==="function"){c=c.getParent();}else{return;}}while(c&&i<100&&!(c instanceof sap.ui.core.UIArea));return o;};
b.prototype._createPopupOverlays=function(e){if(!e){return;}var p=(e instanceof sap.ui.core.Control)?e:e.getSource();if(this.getRta()._oDesignTime.getRootElements().indexOf(p.getId())===-1&&!this._getComponentInsidePopup(p)){this.getRta()._oDesignTime.addRootElement(p);}p.detachAfterOpen(this._createPopupOverlays,this);this.modifyBrowserEvents(p);};
b.prototype._restoreInstanceFunctions=function(){if(this._fnOriginalAddDialogInstance){I.addDialogInstance=this._fnOriginalAddDialogInstance;}if(this._fnOriginalRemoveDialogInstance){I.removeDialogInstance=this._fnOriginalRemoveDialogInstance;}if(this._fnOriginalAddPopoverInstance){I.addPopoverInstance=this._fnOriginalAddPopoverInstance;}if(this._fnOriginalRemovePopoverInstance){I.removePopoverInstance=this._fnOriginalRemovePopoverInstance;}this._applyPopupMethods(this._disablePopupSettings);};
b.prototype._disablePopupSettings=function(p){var o=p.oPopup;var v=o.oContent.getDomRef();if(this.fnPopupOriginalAfterRendering){o.onAfterRendering=this.fnPopupOriginalAfterRendering;}v.removeEventListener("blur",this.fnBlurHandling,true);if(typeof o._bOriginalAutoClose==="boolean"){o.setAutoClose(o._bOriginalAutoClose);delete o._bOriginalAutoClose;}v.addEventListener("blur",o.fEventHandler,true);o.oLastBlurredElement=undefined;q.sap.focus(o.oContent);};
b.prototype.exit=function(){this._restoreInstanceFunctions();};
return b;},true);
/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)

(c) Copyright 2009-2017 SAP SE. All rights reserved
 */
sap.ui.predefine('sap/ui/rta/ControlTreeModifier',["sap/ui/fl/changeHandler/JsControlTreeModifier"],function(J){"use strict";var _;var R={startRecordingUndo:function(){_=[];},stopRecordingUndo:function(){var r=_;_=undefined;return r;},performUndo:function(u){while(u.length){var o=u.pop();this[o.name].apply(this,o.properties);}},_saveUndoOperation:function(f,p){if(_){_.push({name:f,properties:p});}},setVisible:function(c,v){var o=this.getVisible(c);var r=J.setVisible.apply(this,arguments);if(o!==this.getVisible(c)){this._saveUndoOperation("setVisible",[c,o]);}return r;},setStashed:function(c,s){var o;var C=c.getId();if(c.getVisible){o=!c.getVisible();}else{o=c.getStashed();}J.setStashed.apply(this,arguments);var S=sap.ui.getCore().byId(C);if(o!==s){this._saveUndoOperation("setStashed",[S,!s]);}},bindProperty:function(c,p,b){var o=c.getBindingInfo(p);var O;var m=c.getMetadata().getPropertyLikeSetting(p);if(m){var P=m._sGetter;O=c[P]();}J.bindProperty.apply(this,arguments);if(o){this._saveUndoOperation("bindProperty",[c,p,o]);}else{this._saveUndoOperation("unbindProperty",[c,p]);}if(O){this._saveUndoOperation("setProperty",[c,p,O]);}},unbindProperty:function(c,p){var o=c.getBindingInfo(p);J.unbindProperty.apply(this,arguments);if(o){this._saveUndoOperation("bindProperty",[c,p,o]);}},setProperty:function(c,p,P){var o;var m=c.getMetadata().getPropertyLikeSetting(p);if(m){var s=m._sGetter;o=c[s]();}var r=J.setProperty.apply(this,arguments);if(o!==P){this._saveUndoOperation("setProperty",[c,p,o]);}return r;},setPropertyBinding:function(c,p,P){var o;var m=c.getMetadata().getPropertyLikeSetting(p);if(m){var s=m._sGetter;o=c[s]();}J.setPropertyBinding.apply(this,arguments);if(o!==P){this._saveUndoOperation("setPropertyBinding",[c,p,o]);}},createControl:function(c,a,v,s){var e=this.bySelector(s,a);var r=J.createControl.apply(this,arguments);if(!e){var C=this.bySelector(s,a);this._saveUndoOperation("destroy",[C]);}return r;},destroy:function(c){if(c){c.destroy();}},insertAggregation:function(p,n,o,i){var O=J.getAggregation.call(this,p,n);J.insertAggregation.apply(this,arguments);if(p){if(p.getMetadata){var m=p.getMetadata();var a=m.getAllAggregations();if(a){var A=a[n];if(A){if(A.multiple){this._saveUndoOperation("removeAggregation",[p,n,o]);}else{this._saveUndoOperation("insertAggregation",[p,n,O]);}}}}}},removeAggregation:function(p,n,o){var O;var a;if(p&&o){a=J.getAggregation.call(this,p,n);if(a){a.some(function(e,i){if(e===o){O=i;return true;}});}}J.removeAggregation.apply(this,arguments);if(O||O===0){this._saveUndoOperation("insertAggregation",[p,n,o,O]);}},removeAllAggregation:function(p,n){var o=[];var a;if(p){a=J.getAggregation.call(this,p,n);}if(a&&a instanceof Array){o=a.slice();}else if(a&&a instanceof Object){o[0]=a;}J.removeAllAggregation(p,n);if(o){o.forEach(function(e){this._saveUndoOperation("insertAggregation",[p,n,e]);},this);}}};return jQuery.sap.extend(true,{},J,R);},true);
sap.ui.predefine('sap/ui/rta/Utils',['jquery.sap.global','sap/ui/fl/Utils','sap/ui/dt/OverlayUtil','sap/ui/dt/OverlayRegistry','sap/ui/comp/odata/FieldSelectorModelConverter','sap/ui/fl/registry/Settings'],function(q,F,O,a,b,S){"use strict";var U={};U.RESOLVED_PROMISE=Promise.resolve(true);U._sFocusableOverlayClass=".sapUiDtOverlaySelectable";
U.isExtensibilityEnabledInSystem=function(c){var C=F.getComponentClassName(c);if(!C||C==""){return Promise.resolve(false);}return S.getInstance(C).then(function(s){if(s.isModelS){return s.isModelS();}return false;});};
U.getRelevantContainerDesigntimeMetadata=function(o){var r=o.getRelevantContainer();if(!r||!o.getParent()){return undefined;}var R=a.getOverlay(r);return R?R.getDesignTimeMetadata():undefined;};
U.isServiceUpToDate=function(c){return this.isExtensibilityEnabledInSystem(c).then(function(e){if(e){q.sap.require("sap.ui.fl.fieldExt.Access");var m=c.getModel();if(m){var s=sap.ui.fl.fieldExt.Access.isServiceOutdated(m.sServiceUrl);if(s){sap.ui.fl.fieldExt.Access.setServiceValid(m.sServiceUrl);sap.ui.getCore().getEventBus().publish("sap.ui.core.UnrecoverableClientStateCorruption","RequestReload",{});return Promise.reject();}}}});};
U.isCustomFieldAvailable=function(c){return this.isExtensibilityEnabledInSystem(c).then(function(s){if(!s){return false;}else if(!c.getModel()){return false;}else{var d=c.getModel().sServiceUrl;var e=this.getBoundEntityType(c).name;try{q.sap.require("sap.ui.fl.fieldExt.Access");var j=sap.ui.fl.fieldExt.Access.getBusinessContexts(d,e);return Promise.resolve(j).then(function(r){if(r){if(r.BusinessContexts){if(r.BusinessContexts.length>0){r.EntityType=e;return r;}}}else{return false;}}).catch(function(E){if(E){if(q.isArray(E.errorMessages)){for(var i=0;i<E.errorMessages.length;i++){q.sap.log.error(E.errorMessages[i].text);}}}return false;});}catch(E){q.sap.log.error("exception occured in sap.ui.fl.fieldExt.Access.getBusinessContexts",E);return false;}}}.bind(this));};
U.openRemoveConfirmationDialog=function(e,t){var T=sap.ui.getCore().getLibraryResourceBundle("sap.ui.rta");var s;return new Promise(function(r,c){s=T.getText("CTX_REMOVE_TITLE");var d={messageText:t,titleText:s,icon:"sap-icon://question-mark",removeText:T.getText("BTN_FREP_REMOVE"),cancelText:T.getText("BTN_FREP_CANCEL")};var m=new sap.ui.model.json.JSONModel();m.setData(d);var f;var C=function(){if(f){f.close();f.destroy();f=null;}};var o={removeField:function(){C();r(true);},closeDialog:function(){C();r(false);}};if(!f){f=sap.ui.xmlfragment("sap.ui.rta.view.RemoveElementDialog",o);f.setModel(m);}f.open();});};
U.isOverlaySelectable=function(o){return o.isSelectable()&&o.$().is(":visible");};
U.getPropertyValue=function(e,p){var m=e.getMetadata().getPropertyLikeSetting(p);var P=m._sGetter;return e[P]();};
U.getOverlayInstanceForDom=function(d){var i=q(d).attr("id");if(i){return sap.ui.getCore().byId(i);}};
U.getFocusedOverlay=function(){if(document.activeElement){var e=sap.ui.getCore().byId(document.activeElement.id);if(e instanceof sap.ui.dt.ElementOverlay){return e;}}};
U.getFocusableParentOverlay=function(o){if(!o){return undefined;}var f=o.getParentElementOverlay();while(f&&!f.getSelectable()){f=f.getParentElementOverlay();}return f;};
U.getFirstFocusableDescendantOverlay=function(o){return O.getFirstDescendantByCondition(o,this.isOverlaySelectable);};
U.getNextFocusableSiblingOverlay=function(o){var n=O.getNextSiblingOverlay(o);while(n&&!this.isOverlaySelectable(n)){n=O.getNextSiblingOverlay(n);}return n;};
U.getPreviousFocusableSiblingOverlay=function(o){var p=O.getPreviousSiblingOverlay(o);while(p&&!this.isOverlaySelectable(p)){p=O.getPreviousSiblingOverlay(p);}return p;};
U.getIndex=function(p,c,A,g){var i;if(g&&typeof g==="function"){i=g.call(null,p,c);}else{var m=p.getMetadata();var o=m.getAggregation(A);var G=o._sGetter;var C=p[G]();if(c){i=C.indexOf(c)+1;}else{i=C.length;}}return i;};
U.createFieldLabelId=function(p,e,B){return(p.getId()+"_"+e+"_"+B).replace("/","_");};
U.getLabelForElement=function(e,f){if(f){return f(e);}else{var s=e.getText&&e.getText();if(!s){s=e.getLabelText&&e.getLabelText();}if(!s){s=e.getLabel&&e.getLabel();if(s&&s.getText){s=s.getText();}}if(!s){s=e.getTitle&&e.getTitle();}if(!s){s=e.getId&&e.getId();}return(typeof s)==="string"?s:undefined;}};
U.getBoundEntityType=function(e,m){m||(m=e.getModel());var B=e.getBindingContext();if(B){return U.getEntityTypeByPath(m,B.getPath())||{};}return{};};
U.openNewWindow=function(u){window.open(u,"_blank");};
U.getElementBindingPaths=function(e){var p={};if(e.mBindingInfos){for(var i in e.mBindingInfos){var P=e.mBindingInfos[i].parts[0].path?e.mBindingInfos[i].parts[0].path:"";P=P.split("/")[P.split("/").length-1];p[P]={valueProperty:i};}}return p;};
U.getFiori2Renderer=function(){var c=U.getUshellContainer()||{};return typeof c.getRenderer==="function"?c.getRenderer("fiori2"):undefined;};
U.getUshellContainer=function(){return sap.ushell&&sap.ushell.Container;};
U.getEntityTypeByPath=function(m,p){return m.oMetadata._getEntityTypeByPath(p);};
U.getEntityTypeByNavProperty=function(m,o,n){return m.oMetadata._getEntityTypeByNavProperty(o,n);};
U.mergeWith=function(d,s,c){if(!(typeof c==="function")){throw new Error('In order to use mergeWith() utility function fnCustomizer should be provided!');}for(var e in s){if(s.hasOwnProperty(e)){d[e]=d.hasOwnProperty(e)?c(d[e],s[e],e,d,s):s[e];}}return d;};
return U;},true);
sap.ui.predefine('sap/ui/rta/command/BaseCommand',['sap/ui/base/ManagedObject'],function(M){"use strict";
var B=M.extend("sap.ui.rta.command.BaseCommand",{metadata:{library:"sap.ui.rta",properties:{name:{type:"string"}},associations:{element:{type:"sap.ui.core.Element"}},events:{}}});
B.prototype.getElement=function(){var i=this.getAssociation("element");return sap.ui.getCore().byId(i);};
B.prototype.prepare=function(){};
B.prototype.execute=function(){};
B.prototype.undo=function(){};
B.prototype.isEnabled=function(){return true;};
return B;},true);
sap.ui.predefine('sap/ui/rta/command/CommandFactory',['sap/ui/base/ManagedObject','sap/ui/dt/ElementUtil','sap/ui/dt/OverlayRegistry','sap/ui/fl/registry/ChangeRegistry'],function(M,E,O,C){"use strict";var g=function(s,l){var r=C.getInstance().getRegistryItems({controlType:s,changeTypeName:l});if(r&&r[s]&&r[s][l]){var R=r[s][l];return R.getChangeTypeMetadata().getChangeHandler();}else{jQuery.sap.log.warning("No '"+l+"' change handler for "+s+" registered");}};var c=function(o,l,A){var s;if(typeof(A)==="string"){s=A;}else{s=A&&A.changeType;}if(!s){return false;}var n=o.getMetadata().getName();var p=g(n,s);if(!p){return false;}l.setChangeHandler(p);l.setChangeType(s);return true;};var f=function(o,s,D){var n=s.element||sap.ui.getCore().byId(s.element.id);var A=D.getAggregationAction("createContainer",n)[0];return A;};var a=function(o,s,D){var l=s.movedElements[0].element||sap.ui.getCore().byId(s.movedElements[0].id);var A=D.getAction("move",l);if(!A&&D.getMetadata().getName()==="sap.ui.dt.ElementDesignTimeMetadata"){var S=s.source.aggregation;var n=D.createAggregationDesignTimeMetadata(S);A=n.getAction("move",l);n.destroy();}return A;};var b=function(o,s,D){var r=s.renamedElement;var A=D.getAction("rename",r);return A;};var d=function(o,s,D){var r=s.removedElement;if(!r){r=o;}else if(!(r instanceof M)){throw new Error("No valid 'removedElement' found");}var A=D.getAction("remove",r);return A;};var e=function(o,s,D){var l=s.source;var A=D.getAction("combine",l);return A;};var h=function(o,s,D){var S=s.source;var A=D.getAction("split",S);return A;};var i=function(o,s,D){var n=s.element;var A=D.getAction("addODataProperty",n);return A;};var j=function(o,s,D){var r=s.directParent;var A=D.getAction("reveal",r);return A;};var m={"composite":{clazz:'sap.ui.rta.command.CompositeCommand'},"property":{clazz:'sap.ui.rta.command.Property'},"bindProperty":{clazz:'sap.ui.rta.command.BindProperty'},"createContainer":{clazz:'sap.ui.rta.command.CreateContainer',configure:f},"move":{clazz:'sap.ui.rta.command.Move',configure:a},"remove":{clazz:'sap.ui.rta.command.Remove',configure:d},"rename":{clazz:'sap.ui.rta.command.Rename',configure:b},"addODataProperty":{clazz:'sap.ui.rta.command.AddODataProperty',configure:i},"reveal":{clazz:'sap.ui.rta.command.Reveal',configure:j},"combine":{clazz:'sap.ui.rta.command.Combine',configure:e},"split":{clazz:'sap.ui.rta.command.Split',configure:h},"settings":{clazz:'sap.ui.rta.command.Settings'}};var _=function(v,s,S,D,F){s=s[0].toLowerCase()+s.slice(1);var l=m[s];if(!l){throw new Error("Command '"+s+"' doesn't exist, check typing");}var n=l.clazz;jQuery.sap.require(n);var o=jQuery.sap.getObject(n);var I=v instanceof sap.ui.base.ManagedObject;S=jQuery.extend(S,{element:I?v:undefined,selector:I?undefined:v,name:s});var A;if(l.configure){A=l.configure(v,S,D);}var p;if(A&&A.changeOnRelevantContainer){p=O.getOverlay(v);S=jQuery.extend(S,{element:p.getRelevantContainer()});v=S.element;}if(A&&A.getState){S=jQuery.extend(S,{fnGetState:A.getState});}if(A&&A.restoreState){S=jQuery.extend(S,{fnRestoreState:A.restoreState});}var q=new o(S);var r=true;if(l.configure){r=c(v,q,A);}if(r){q.prepare(F);return q;}else{q.destroy();}};
var k=M.extend("sap.ui.rta.command.CommandFactory",{metadata:{library:"sap.ui.rta",properties:{"flexSettings":{type:"object"}},associations:{},events:{}}});
k.prototype.init=function(){this.setProperty("flexSettings",{layer:"CUSTOMER",developerMode:true});};
k.prototype.setFlexSettings=function(F){this.setProperty("flexSettings",jQuery.extend(this.getFlexSettings(),F));};
k.prototype.getCommandFor=function(v,s,S,D){return _(v,s,S,D,this.getFlexSettings());};
k.getCommandFor=function(v,s,S,D,F){return _(v,s,S,D,F);};
return k;},true);
sap.ui.predefine('sap/ui/rta/command/CompositeCommand',['sap/ui/rta/command/BaseCommand'],function(B){"use strict";
var C=B.extend("sap.ui.rta.command.CompositeCommand",{metadata:{library:"sap.ui.rta",properties:{},aggregations:{commands:{type:"sap.ui.rta.command.BaseCommand",multiple:true}},events:{}}});
C.prototype.execute=function(){this._forEachCommand(function(c){c.execute();});};
C.prototype.undo=function(){this._forEachCommandInReverseOrder(function(c){c.undo();});};
C.prototype._forEachCommand=function(d){var c=this.getCommands();c.forEach(d,this);};
C.prototype._forEachCommandInReverseOrder=function(d){var c=this.getCommands();for(var i=c.length-1;i>=0;i--){d.call(this,c[i]);}};
return C;},true);
sap.ui.predefine('sap/ui/rta/command/FlexCommand',['sap/ui/rta/command/BaseCommand',"sap/ui/fl/FlexControllerFactory","sap/ui/rta/ControlTreeModifier","sap/ui/fl/Utils"],function(B,F,R,U){"use strict";
var a=B.extend("sap.ui.rta.command.FlexCommand",{metadata:{library:"sap.ui.rta",properties:{changeHandler:{type:"any"},changeType:{type:"string"},fnGetState:{type:"any"},state:{type:"any"},fnRestoreState:{type:"any"},selector:{type:"object"}},associations:{},events:{}}});
a.prototype.getElementId=function(){var e=this.getElement();return e?e.getId():this.getSelector().id;};
a.prototype.getAppComponent=function(){if(!this._oControlAppComponent){var e=this.getElement();this._oControlAppComponent=e?U.getAppComponentForControl(e):this.getSelector().appComponent;}return this._oControlAppComponent;};
a.prototype.prepare=function(f){if(!this.getSelector()&&this.getElement()){var s={id:this.getElement().getId(),appComponent:this.getAppComponent(),controlType:U.getControlType(this.getElement())};this.setSelector(s);}this._oPreparedChange=this._createChange(f);};
a.prototype.getPreparedChange=function(){if(!this._oPreparedChange){this.prepare();}return this._oPreparedChange;};
a.prototype.execute=function(){var c=this.getPreparedChange();this._applyChange(c);};
a.prototype._getChangeSpecificData=function(){return{changeType:this.getChangeType(),selector:{id:this.getElementId()}};};
a.prototype._createChange=function(f){return this._createChangeFromData(this._getChangeSpecificData(),f);};
a.prototype._createChangeFromData=function(c,f){if(f){jQuery.extend(c,f);}var o=F.createForControl(this.getAppComponent());return o.createChange(c,this.getElement()||this.getSelector());};
a.prototype.undo=function(){if(this.getFnRestoreState()){this.getFnRestoreState()((this.getElement()||this.getSelector()),this.getState());}else if(this._aRecordedUndo){R.performUndo(this._aRecordedUndo);}else{jQuery.sap.log.warning("Undo is not available for "+this.getElement()||this.getSelector());}};
a.prototype._applyChange=function(c){var C=c.change||c;var A=this.getAppComponent();var o=C.getDefinition();var s=R.bySelector(C.getSelector(),A);if(this.getFnGetState()){this.setState.call(this,(this.getFnGetState()((this.getElement()||this.getSelector()),o,{modifier:R,appComponent:A})));}else{R.startRecordingUndo();}this.getChangeHandler().applyChange(C,s,{modifier:R,appComponent:A});if(!this.getFnGetState()){this._aRecordedUndo=R.stopRecordingUndo();}};
return a;},true);
sap.ui.predefine('sap/ui/rta/library',['jquery.sap.global','sap/ui/core/Core','sap/ui/core/library'],function(q,C,c){"use strict";sap.ui.getCore().initLibrary({name:"sap.ui.rta",version:"1.48.6",dependencies:["sap.ui.core","sap.m","sap.ui.fl","sap.ui.dt"],types:[],interfaces:[],controls:[],elements:[]});return sap.ui.rta;},true);
sap.ui.predefine('sap/ui/rta/plugin/CutPaste',['jquery.sap.global','sap/ui/dt/plugin/CutPaste','sap/ui/dt/OverlayUtil','sap/ui/rta/plugin/Plugin','sap/ui/rta/plugin/RTAElementMover'],function(q,C,O,P,R){"use strict";
var a=C.extend("sap.ui.rta.plugin.CutPaste",{metadata:{library:"sap.ui.rta",properties:{commandFactory:{type:"object",multiple:false}},events:{dragStarted:{},elementModified:{command:{type:"sap.ui.rta.command.BaseCommand"}}}}});
a.prototype.init=function(){C.prototype.init.apply(this,arguments);this.setElementMover(new R({commandFactory:this.getCommandFactory()}));};
a.prototype.registerElementOverlay=function(o){C.prototype.registerElementOverlay.apply(this,arguments);if(o.isMovable()){P.prototype.addToPluginsList.apply(this,arguments);}};
a.prototype.deregisterElementOverlay=function(o){C.prototype.deregisterElementOverlay.apply(this,arguments);P.prototype.removeFromPluginsList.apply(this,arguments);};
a.prototype.paste=function(t){this._executePaste(t);this.fireElementModified({"command":this.getElementMover().buildMoveCommand()});this.stopCutAndPaste();};
return a;},true);
sap.ui.predefine('sap/ui/rta/plugin/DragDrop',['jquery.sap.global','sap/ui/dt/plugin/ControlDragDrop','sap/ui/rta/plugin/RTAElementMover','sap/ui/rta/plugin/Plugin'],function(q,C,R,P){"use strict";
var D=C.extend("sap.ui.rta.plugin.DragDrop",{metadata:{library:"sap.ui.rta",properties:{commandFactory:{type:"object",multiple:false}},events:{dragStarted:{},elementModified:{command:{type:"sap.ui.rta.command.BaseCommand"}}}}});
D.prototype.init=function(){C.prototype.init.apply(this,arguments);this.setElementMover(new R({commandFactory:this.getCommandFactory()}));};
D.prototype.setCommandFactory=function(c){this.setProperty("commandFactory",c);this.getElementMover().setCommandFactory(c);};
D.prototype.registerElementOverlay=function(o){C.prototype.registerElementOverlay.apply(this,arguments);if(o.isMovable()){this._attachMovableBrowserEvents(o);P.prototype.addToPluginsList.apply(this,arguments);}};
D.prototype.deregisterElementOverlay=function(o){C.prototype.deregisterElementOverlay.apply(this,arguments);P.prototype.removeFromPluginsList.apply(this,arguments);this._detachMovableBrowserEvents(o);};
D.prototype._attachMovableBrowserEvents=function(o){o.attachBrowserEvent("mouseover",this._onMouseOver,this);o.attachBrowserEvent("mouseleave",this._onMouseLeave,this);};
D.prototype._detachMovableBrowserEvents=function(o){o.detachBrowserEvent("mouseover",this._onMouseOver,this);o.detachBrowserEvent("mouseleave",this._onMouseLeave,this);};
D.prototype.onDragStart=function(o){this.fireDragStarted();C.prototype.onDragStart.apply(this,arguments);this.getDesignTime().getSelection().forEach(function(o){o.setSelected(false);});o.$().addClass("sapUiRtaOverlayPlaceholder");};
D.prototype.onDragEnd=function(o){this.fireElementModified({"command":this.getElementMover().buildMoveCommand()});o.$().removeClass("sapUiRtaOverlayPlaceholder");o.setSelected(true);o.focus();C.prototype.onDragEnd.apply(this,arguments);};
D.prototype.onMovableChange=function(o){C.prototype.onMovableChange.apply(this,arguments);if(o.isMovable()){this._attachMovableBrowserEvents(o);}else{this._detachMovableBrowserEvents(o);}};
D.prototype._onMouseOver=function(e){var o=sap.ui.getCore().byId(e.currentTarget.id);if(o!==this._oPreviousHoverTarget){if(this._oPreviousHoverTarget){this._oPreviousHoverTarget.$().removeClass("sapUiRtaOverlayHover");}this._oPreviousHoverTarget=o;o.$().addClass("sapUiRtaOverlayHover");}e.preventDefault();e.stopPropagation();};
D.prototype._onMouseLeave=function(e){if(this._oPreviousHoverTarget){this._oPreviousHoverTarget.$().removeClass("sapUiRtaOverlayHover");}delete this._oPreviousHoverTarget;e.preventDefault();e.stopPropagation();};
return D;},true);
sap.ui.predefine('sap/ui/rta/plugin/Plugin',['sap/ui/dt/Plugin','sap/ui/fl/Utils','sap/ui/fl/registry/ChangeRegistry'],function(P,F,C){"use strict";
var B=P.extend("sap.ui.rta.plugin.Plugin",{metadata:{"abstract":true,library:"sap.ui.rta",properties:{commandFactory:{type:"object",multiple:false}},events:{elementModified:{command:{type:"sap.ui.rta.command.BaseCommand"}}}}});
B.prototype._isEditable=function(){};
B.prototype._isEditableByPlugin=function(o){var p=this.getMetadata().getName();var a=o.getEditableByPlugins();return a.indexOf(p)>-1;};
B.prototype.registerElementOverlay=function(o){if(this._isEditable(o)){this.addToPluginsList(o);}};
B.prototype.deregisterElementOverlay=function(o){this.removeFromPluginsList(o);};
B.prototype.hasStableId=function(o){if(!o){return false;}else if(!o.getDesignTimeMetadata()){return F.checkControlId(o.getElementInstance());}var s=false;var d=o.getDesignTimeMetadata();var e=o.getElementInstance();var g=d.getData().getStableElements;if(g){var S=g(e);var u=S?S.some(function(v){var c=v.id||v;if(!F.checkControlId(c,v.appComponent)){return true;}}):true;s=!u;}else{s=F.checkControlId(e);}return s;};
B.prototype.checkAggregationsOnSelf=function(o,a){var d=o.getDesignTimeMetadata();var e=o.getElementInstance();var i=false;var A=d.getAggregationAction(a,o.getElementInstance())[0];var c=A?A.changeType:null;var b=A&&A.changeOnRelevantContainer;if(b){e=o.getRelevantContainer();}if(c&&this.hasChangeHandler(c,e)){i=true;}return i;};
B.prototype.removeFromPluginsList=function(o){o.removeEditableByPlugin(this.getMetadata().getName());if(!o.getEditableByPlugins().length){o.setEditable(false);}};
B.prototype.addToPluginsList=function(o){o.addEditableByPlugin(this.getMetadata().getName());o.setEditable(true);};
B.prototype.hasChangeHandler=function(c,e){var h=false;var s=e.getMetadata().getName();var r=C.getInstance().getRegistryItems({controlType:s,changeTypeName:c,layer:this.getCommandFactory().getFlexSettings().layer});if(r&&r[s]&&r[s][c]){var R=r[s][c];h=!!R.getChangeTypeMetadata().getChangeHandler();}return h;};
return B;},true);
sap.ui.predefine('sap/ui/rta/plugin/RTAElementMover',['sap/ui/dt/plugin/ElementMover','sap/ui/dt/OverlayUtil','sap/ui/dt/ElementUtil','sap/ui/fl/Utils','sap/ui/rta/Utils','sap/ui/rta/command/CommandFactory','sap/ui/rta/plugin/Plugin','sap/ui/dt/OverlayRegistry','sap/ui/rta/util/BindingsExtractor'],function(E,O,a,F,U,C,P,b,B){"use strict";
var R=E.extend("sap.ui.rta.plugin.RTAElementMover",{metadata:{library:"sap.ui.rta",properties:{commandFactory:{type:"any",defaultValue:C},movableTypes:{type:"string[]",defaultValue:["sap.ui.core.Element"]}},associations:{},events:{}}});
R.prototype.init=function(){this.oBasePlugin=new P({commandFactory:this.getCommandFactory()});};
R.prototype.exit=function(){this.oBasePlugin.destroy();};
R.prototype.setCommandFactory=function(c){this.setProperty("commandFactory",c);this.oBasePlugin.setCommandFactory(c);};
function i(o){var v=false,d=o.getDesignTimeMetadata(),p=o.getParentElementOverlay(),c;if(!d||!p){return false;}var r=o.getRelevantContainer();var e=sap.ui.dt.OverlayRegistry.getOverlay(r);if(!U.getRelevantContainerDesigntimeMetadata(o)){return false;}var m=this._getMoveAction(o);if(m&&m.changeType){c=o.getRelevantContainer();v=this.oBasePlugin.hasChangeHandler(m.changeType,c);}if(v){v=this.oBasePlugin.hasStableId(o)&&this.oBasePlugin.hasStableId(p)&&this.oBasePlugin.hasStableId(e);}return v;}
function h(A,e,r){var o=A.getDesignTimeMetadata();var m=o.getAction("move",e);if(!m){return false;}return this.oBasePlugin.hasChangeHandler(m.changeType,r);}
E.prototype._getMoveAction=function(o){var p,c=o.getParentAggregationOverlay();if(c){p=c.getDesignTimeMetadata();}return p?p.getAction("move",o.getElementInstance()):undefined;};
E.prototype.isMovableType=function(e){return true;};
R.prototype.checkMovable=function(o){return i.call(this,o);};
R.prototype.checkTargetZone=function(A){var t=E.prototype.checkTargetZone.call(this,A);if(!t){return false;}var m=this.getMovedOverlay();var M=m.getElementInstance();var T=A.getParent();var o=m.getRelevantContainer();var c=T.getElementInstance();var v=A.getDesignTimeMetadata().getRelevantContainerForPropagation(M);v=v?v:c;if(!o||!v||!P.prototype.hasStableId(T)||o!==v){return false;}if(m.getParent().getElementInstance()!==c){var d=B.getBindings(M,M.getModel());if(Object.keys(d).length>0&&c.getBindingContext()){var s=U.getEntityTypeByPath(M.getModel(),M.getBindingContext().getPath());var e=U.getEntityTypeByPath(c.getModel(),c.getBindingContext().getPath());if(!(s===e)){return false;}}}return h.call(this,A,M,v);};
R.prototype.buildMoveCommand=function(){var m=this.getMovedOverlay();var p=m.getParentAggregationOverlay();var M=m.getElementInstance();var s=this._getSource();var r=m.getRelevantContainer();var t=O.getParentInformation(m);var S=s.index;var T=t.index;var c=this._compareSourceAndTarget(s,t);if(c){return undefined;}delete s.index;delete t.index;var o=this.getCommandFactory().getCommandFor(r,"Move",{movedElements:[{element:M,sourceIndex:S,targetIndex:T}],source:s,target:t},p.getDesignTimeMetadata());return o;};
return R;},true);
sap.ui.predefine('sap/ui/rta/plugin/Rename',['jquery.sap.global','sap/ui/rta/plugin/Plugin','sap/ui/dt/ElementUtil','sap/ui/dt/OverlayUtil','sap/ui/dt/OverlayRegistry','sap/ui/rta/Utils','sap/ui/dt/DOMUtil'],function(q,P,E,O,a,U,D){"use strict";
var R=P.extend("sap.ui.rta.plugin.Rename",{metadata:{library:"sap.ui.rta",properties:{oldValue:"string"},associations:{},events:{"editable":{},"nonEditable":{}}}});
R.prototype.exit=function(){P.prototype.exit.apply(this,arguments);if(this._$oEditableControlDomRef){this._stopEdit();}clearTimeout(this._iStopTimeout);};
R.prototype.setDesignTime=function(d){this._aSelection=[];var o=this.getDesignTime();if(o){o.detachSelectionChange(this._onDesignTimeSelectionChange,this);}P.prototype.setDesignTime.apply(this,arguments);if(d){d.attachSelectionChange(this._onDesignTimeSelectionChange,this);this._aSelection=d.getSelection();}};
R.prototype._getRenameAction=function(o){var d=o.getDesignTimeMetadata();if(d&&d.getAction){return d.getAction("rename",o.getElementInstance());}};
R.prototype.isRenameAvailable=function(o){return this._isEditableByPlugin(o);};
R.prototype.isRenameEnabled=function(o){var i=true;var A=this._getRenameAction(o);if(!A){i=false;}if(i&&typeof A.isEnabled!=="undefined"){if(typeof A.isEnabled==="function"){i=A.isEnabled(o.getElementInstance());}else{i=A.isEnabled;}}if(i){var d=o.getDesignTimeMetadata();if(!d.getAssociatedDomRef(o.getElementInstance(),A.domRef)){i=false;}}return i;};
R.prototype.registerElementOverlay=function(o){o.attachEvent("editableChange",this._manageClickEvent,this);P.prototype.registerElementOverlay.apply(this,arguments);};
R.prototype._isEditable=function(o){var e=false;var b=o.getElementInstance();if(!U.getRelevantContainerDesigntimeMetadata(o)){return false;}var r=this._getRenameAction(o);if(r&&r.changeType){if(r.changeOnRelevantContainer){b=o.getRelevantContainer();}e=this.hasChangeHandler(r.changeType,b);}if(e){return this.hasStableId(o);}return e;};
R.prototype.deregisterElementOverlay=function(o){o.detachEvent("editableChange",this._manageClickEvent,this);o.detachBrowserEvent("click",this._onClick,this);this.removeFromPluginsList(o);};
R.prototype._onClick=function(e){var o=sap.ui.getCore().byId(e.currentTarget.id);if(this.isRenameEnabled(o)&&!e.metaKey&&!e.ctrlKey){this.startEdit(o);e.preventDefault();}};
R.prototype._onDesignTimeSelectionChange=function(e){var s=e.getParameter("selection");this._aSelection.forEach(this._manageClickEvent,this);s.forEach(this._manageClickEvent,this);this._aSelection=s;};
R.prototype._manageClickEvent=function(e){var o=e.getSource?e.getSource():e;if(o.isSelected()&&this.isRenameAvailable(o)){o.attachBrowserEvent("click",this._onClick,this);}else{o.detachBrowserEvent("click",this._onClick,this);}};
R.prototype.startEdit=function(o){this._oEditedOverlay=o;var e=o.getElementInstance();var d=this._oEditedOverlay.getDesignTimeMetadata();var v=d.getAction("rename",e).domRef;var b=d.getAssociatedDomRef(e,v);this._$oEditableControlDomRef=q(b);var c=sap.ui.dt.OverlayRegistry.getOverlay(b.id)||o;var w=q("<div class='sapUiRtaEditableField'></div>").appendTo(c.$());this._$editableField=q("<div contentEditable='true'></div>").appendTo(w);if(this._$oEditableControlDomRef.text()===""){this._$oEditableControlDomRef.text("_?_");this._$editableField.text("");}else{this._$editableField.text(this._$oEditableControlDomRef.text());}D.copyComputedStyles(this._$oEditableControlDomRef,this._$editableField);this._$editableField.children().remove();this._$editableField.offset({left:this._$oEditableControlDomRef.offset().left});this._$editableField.offset({top:this._$oEditableControlDomRef.offset().top});this._$editableField.css({"-moz-user-modify":"read-write","-webkit-user-modify":"read-write","-ms-user-modify":"read-write","user-modify":"read-write","text-overflow":"clip"});this._$oEditableControlDomRef.css("visibility","hidden");this._$editableField.one("focus",this._onEditableFieldFocus.bind(this));this._$editableField.on("blur",this._onEditableFieldBlur.bind(this));this._$editableField.on("keydown",this._onEditableFieldKeydown.bind(this));this._$editableField.on("dragstart",this._stopPropagation.bind(this));this._$editableField.on("drag",this._stopPropagation.bind(this));this._$editableField.on("dragend",this._stopPropagation.bind(this));this._$editableField.on("click",this._stopPropagation.bind(this));this._$editableField.on("mousedown",this._stopPropagation.bind(this));this._$editableField.focus();o.setSelected(true);this.setOldValue(this._getCurrentEditableFieldText());};
R.prototype._stopPropagation=function(e){e.stopPropagation();};
R.prototype._onEditableFieldFocus=function(e){this._oEditedOverlay.setSelected(false);var b=e.target;var r=document.createRange();r.selectNodeContents(b);var s=window.getSelection();s.removeAllRanges();s.addRange(r);};
R.prototype._stopEdit=function(r){if(this._$oEditableControlDomRef.text()==="_?_"){this._$oEditableControlDomRef.text("");}this._oEditedOverlay.$().find(".sapUiRtaEditableField").remove();this._$oEditableControlDomRef.css("visibility","visible");if(r){var o=this._oEditedOverlay;this._iStopTimeout=setTimeout(function(){o.setSelected(true);o.focus();},500);}this._oEditedOverlay.setSelected(false);delete this._$editableField;delete this._$oEditableControlDomRef;delete this._oEditedOverlay;};
R.prototype._onEditableFieldBlur=function(e){this._emitLabelChangeEvent();this._stopEdit();};
R.prototype._onEditableFieldKeydown=function(e){switch(e.keyCode){case q.sap.KeyCodes.ENTER:this._emitLabelChangeEvent();this._stopEdit(true);e.preventDefault();break;case q.sap.KeyCodes.ESCAPE:this._stopEdit(true);e.preventDefault();break;case q.sap.KeyCodes.DELETE:e.stopPropagation();break;}};
R.prototype._emitLabelChangeEvent=function(){var t=this._getCurrentEditableFieldText();if(this.getOldValue()!==t){this._$oEditableControlDomRef.text(t);try{var r;var o=this._oEditedOverlay.getElementInstance();var d=this._oEditedOverlay.getDesignTimeMetadata();r=this.getCommandFactory().getCommandFor(o,"rename",{renamedElement:o,newValue:t},d);this.fireElementModified({"command":r});}catch(e){q.sap.log.error("Error during rename : ",e);}}};
R.prototype._getCurrentEditableFieldText=function(){var t=this._$editableField.text();if(t===""){t='\xa0';}return t;};
return R;},true);
sap.ui.predefine('sap/ui/rta/toolbar/Adaptation',['sap/m/ToolbarSpacer','sap/m/Button','sap/m/SegmentedButton','sap/m/SegmentedButtonItem','./Base'],function(T,B,S,a,b){"use strict";
var A=b.extend("sap.ui.rta.toolbar.Adaptation",{
renderer:'sap.ui.rta.toolbar.BaseRenderer',
animation:true,
metadata:{events:{"undo":{},"redo":{},"exit":{},"restore":{},"transport":{},"modeChange":{}},properties:{"publishVisible":{"type":"boolean","defaultValue":false},"modeSwitcher":{type:"string",defaultValue:"adaptation"}}}
});
A.prototype.onAfterRendering=function(){var s=-1;var i=false;var w=this.getAggregation('content').reduce(function(r,c){switch(c.data('name')){case'spacerLeft':s=1;i=true;break;case'spacerRight':i=false;break;}return!(c instanceof T)&&!i?r+s*c.$().outerWidth(true):r;},0);if(w>0){this.getControl('spacerBalancer').setWidth(w+'px');}b.prototype.onAfterRendering.apply(this,arguments);};
A.prototype.buildControls=function(){return[new T().data('name','spacerBalancer'),new T().data('name','spacerLeft'),new S({width:"auto",selectedKey:this.getModeSwitcher(),items:[new a({text:this.getTextResources().getText("BTN_ADAPTATION"),width:"auto",key:"adaptation"}),new a({text:this.getTextResources().getText("BTN_NAVIGATION"),width:"auto",key:"navigation"})],select:this.eventHandler.bind(this,'ModeChange')}).data('name','modeSwitcher'),new T().data('name','spacerRight'),new B({type:"Transparent",icon:"sap-icon://undo",enabled:false,tooltip:this.getTextResources().getText("BTN_UNDO"),press:this.eventHandler.bind(this,'Undo')}).data('name','undo'),new B({type:"Transparent",icon:"sap-icon://redo",iconFirst:false,enabled:false,tooltip:this.getTextResources().getText("BTN_REDO"),press:this.eventHandler.bind(this,'Redo')}).data('name','redo'),new B({type:"Transparent",text:this.getTextResources().getText("BTN_RESTORE"),visible:true,enabled:false,tooltip:this.getTextResources().getText("BTN_RESTORE"),press:this.eventHandler.bind(this,'Restore')}).data('name','restore'),new sap.m.Button({type:"Transparent",enabled:false,visible:this.getPublishVisible(),text:this.getTextResources().getText("BTN_PUBLISH"),tooltip:this.getTextResources().getText("BTN_PUBLISH"),press:this.eventHandler.bind(this,'Transport')}).data('name','publish'),new B({type:"Transparent",text:this.getTextResources().getText("BTN_EXIT"),tooltip:this.getTextResources().getText("BTN_EXIT"),press:this.eventHandler.bind(this,'Exit')}).data('name','exit')];};
A.prototype.setUndoRedoEnabled=function(c,C){this.getControl('undo').setEnabled(c);this.getControl('redo').setEnabled(C);};
A.prototype.setPublishEnabled=function(e){this.getControl('publish').setEnabled(e);};
A.prototype.setRestoreEnabled=function(e){this.getControl('restore').setEnabled(e);};
A.prototype.show=function(){return b.prototype.show.apply(this,arguments);};
A.prototype.hide=function(){return b.prototype.hide.apply(this,arguments);};
return A;},true);
sap.ui.predefine('sap/ui/rta/toolbar/Base',['jquery.sap.global','sap/ui/rta/library','sap/ui/core/Popup','sap/m/Toolbar','sap/ui/core/BusyIndicator','../util/Animation'],function(q,l,P,T,B,A){"use strict";
var a=T.extend("sap.ui.rta.toolbar.Base",{
metadata:{library:"sap.ui.rta",properties:{"color":{type:"string",defaultValue:"default"},"zIndex":{type:"int"},"textResources":"object"}},
constructor:function(){T.apply(this,arguments);this.placeToContainer();this.buildContent();},
type:null,
animation:false
});
a.prototype.init=function(){T.prototype.init.apply(this,arguments);};
a.prototype.onBeforeRendering=function(){T.prototype.onBeforeRendering.apply(this,arguments);};
a.prototype.onAfterRendering=function(){T.prototype.onAfterRendering.apply(this,arguments);};
a.prototype.eventHandler=function(e,E){this['fire'+e](E.getParameters());};
a.prototype.buildControls=function(){return[];};
a.prototype.placeToContainer=function(){this.placeAt(q('#sap-ui-static').get(0));};
a.prototype.buildContent=function(){this.buildControls().forEach(this.addContent,this);};
a.prototype.show=function(){return new Promise(function(r){var d={onAfterRendering:function(){this.removeEventDelegate(d);r();}};this.addEventDelegate(d,this);this.bringToFront();this.setVisible(true);}.bind(this)).then(function(){return this.animation?A.waitTransition(this.$(),this.addStyleClass.bind(this,'is_visible')):Promise.resolve();}.bind(this)).then(function(){this.focus();}.bind(this));};
a.prototype.hide=function(){return(this.animation?A.waitTransition(this.$(),this.removeStyleClass.bind(this,'is_visible')):Promise.resolve()).then(function(){this.setVisible(false);}.bind(this));};
a.prototype.getControl=function(n){return this.getAggregation('content').filter(function(c){return c.data('name')===n;}).pop();};
a.prototype.bringToFront=function(){var n;var b=B.oPopup;if(b&&b.isOpen()&&b.getModal()){n=b._iZIndex-3;}else{n=P.getNextZIndex();}return this.setZIndex(n);};
a.prototype.setUndoRedoEnabled=function(){};
a.prototype.setPublishEnabled=function(){};
a.prototype.setRestoreEnabled=function(){};
return a;},true);
sap.ui.predefine('sap/ui/rta/toolbar/BaseRenderer',['sap/ui/core/Renderer','sap/m/ToolbarRenderer'],function(R,T){"use strict";var B=R.extend('sap.ui.rta.toolbar.BaseRenderer',T);
B.decorateRootElement=function(r,c){r.addClass('sapContrastPlus');r.addClass('sapUiRtaToolbar');r.addClass("color_"+c.getColor());r.addClass("type_"+c.type);var z=c.getZIndex();z&&r.addStyle("z-index",z);T.decorateRootElement(r,c);};
return B;});
sap.ui.predefine('sap/ui/rta/toolbar/Fiori',['sap/m/Image','./Adaptation','../Utils'],function(I,A,U){"use strict";var F='sapUiRtaFioriHeaderInvisible';
var a=A.extend("sap.ui.rta.toolbar.Fiori",{
renderer:'sap.ui.rta.toolbar.BaseRenderer',
type:'fiori'
});
a.prototype.init=function(){A.prototype.init.apply(this,arguments);this._oRenderer=U.getFiori2Renderer();this._oFioriHeader=this._oRenderer.getRootControl().getOUnifiedShell().getHeader();};
a.prototype.show=function(){this._oFioriHeader.addStyleClass(F);return A.prototype.show.apply(this,arguments);};
a.prototype.buildControls=function(){var c=A.prototype.buildControls.apply(this,arguments);var l=this._oFioriHeader.getLogo();if(this._oFioriHeader.getShowLogo()&&l){c.unshift(new I({src:l}).data('name','logo'));}return c;};
a.prototype.hide=function(){return A.prototype.hide.apply(this,arguments).then(function(){this._oFioriHeader.removeStyleClass(F);}.bind(this));};
return a;},true);
sap.ui.predefine('sap/ui/rta/toolbar/Personalization',['./Base','sap/m/ToolbarSpacer'],function(B,T){"use strict";
var P=B.extend("sap.ui.rta.toolbar.Personalization",{
renderer:'sap.ui.rta.toolbar.BaseRenderer',
type:'personalization',
metadata:{events:{"exit":{},"restore":{}}}
});
P.prototype.buildControls=function(){var c=[new T(),new sap.m.Button({type:"Transparent",text:this.getTextResources().getText("BTN_RESTORE"),tooltip:this.getTextResources().getText("BTN_RESTORE"),visible:true,press:this.eventHandler.bind(this,'Restore')}).data('name','restore'),new sap.m.Button({type:"Emphasized",text:this.getTextResources().getText("BTN_DONE"),tooltip:this.getTextResources().getText("BTN_DONE"),press:this.eventHandler.bind(this,'Exit')}).data('name','exit')];return c;};
P.prototype.setUndoRedoEnabled=function(){};
P.prototype.setPublishEnabled=function(){};
P.prototype.setRestoreEnabled=function(e){this.getControl('restore').setEnabled(e);};
return P;},true);
sap.ui.predefine('sap/ui/rta/toolbar/Standalone',['./Adaptation'],function(A){"use strict";
var S=A.extend("sap.ui.rta.toolbar.Standalone",{
renderer:'sap.ui.rta.toolbar.BaseRenderer',
type:'standalone'
});
return S;},true);
sap.ui.predefine('sap/ui/rta/util/Animation',['jquery.sap.global'],function(q){"use strict";var m={};
m.waitTransition=function($,c){if(!($ instanceof q)){throw new Error('$element should be wrapped into jQuery object');}if(!q.isFunction(c)){throw new Error('fnCallback should be a function');}return new Promise(function(r){$.one('transitionend',r);c();});};
return m;},true);
sap.ui.predefine('sap/ui/rta/util/BindingsExtractor',['sap/ui/dt/ElementUtil','sap/ui/rta/Utils'],function(E,R){"use strict";
function g(e,p){var b=[];for(var A in e.getMetadata().getAllAggregations()){E.getAggregation(e,A).forEach(function(c){if(c.getMetadata){b=b.concat(a(c,p),g(c,p));}});}return b;}
function f(b,p){var B=[];var m=b.getMetadata().getName();if(m==="sap.ui.model.CompositeBinding"){b.getBindings().forEach(function(b){B=B.concat(f(b,p));});}else if((m==="sap.ui.model.odata.ODataPropertyBinding"||m==="sap.ui.model.odata.v4.ODataPropertyBinding"||m==="sap.ui.model.json.JSONPropertyBinding"||m==="sap.ui.model.json.XMLPropertyBinding"||m==="sap.ui.model.resource.ResourcePropertyBinding")&&b.getModel()===p&&b.isRelative()&&jQuery.isFunction(b.getPath)&&b.getPath()){B.push(b);}return B;}
function a(c,p){var P=Object.keys(c.getMetadata().getAllProperties());return P.filter(c.isBound.bind(c)).reduce(function(b,s){return b.concat(f(c.getBinding(s),p));},[]);}
return{getBindings:g,flattenBindings:f,getBindingsFromProperties:a};},true);
sap.ui.predefine('sap/ui/rta/util/StylesLoader',['jquery.sap.global'],function(q){"use strict";var m={};
m.loadStyles=function(f){return q.get(q.sap.getModulePath('sap.ui.rta.themes.base.'+f)+'.css').then(function(d){if(sap.ui.getCore().getConfiguration().getRTL()){return d.replace(/right/g,'left');}return d;});};
return m;},true);
jQuery.sap.registerPreloadedModules({
"name":"sap/ui/rta/library-preload",
"version":"2.0",
"modules":{
	"sap/ui/rta/manifest.json":'{\n  "_version": "1.2.0",\n  "sap.app": {\n    "_version": "1.2.0",\n    "id": "sap.ui.rta",\n    "type": "library",\n    "embeds": [],\n    "applicationVersion": {\n      "version": "1.48.6"\n    },\n    "title": "SAPUI5 library with RTA controls.",\n    "description": "SAPUI5 library with RTA controls.",\n    "ach": "CA-UI5-RTA",\n    "resources": "resources.json",\n    "offline": true\n  },\n  "sap.ui": {\n    "_version": "1.1.0",\n    "technology": "UI5",\n    "supportedThemes": [\n      "base",\n      "sap_belize",\n      "sap_belize_hcw",\n      "sap_belize_plus",\n      "sap_bluecrystal",\n      "sap_hcb"\n    ]\n  },\n  "sap.ui5": {\n    "_version": "1.1.0",\n    "dependencies": {\n      "minUI5Version": "1.48",\n      "libs": {\n        "sap.ui.core": {\n          "minVersion": "1.48.6"\n        },\n        "sap.m": {\n          "minVersion": "1.48.6"\n        }\n      }\n    }\n  }\n}',
	"sap/ui/rta/view/RemoveElementDialog.fragment.xml":'<core:FragmentDefinition xmlns:core="sap.ui.core"\n\txmlns:commons="sap.ui.commons" xmlns:layout="sap.ui.layout"\n\txmlns:sap.m="sap.m">\n\t<sap.m:Dialog class="sapUiRtaConfirmationDialog" verticalScrolling="false" title="{/titleText}" icon="{/icon}">\n\t\t<layout:VerticalLayout width="100%">\n\t\t\t<commons:TextView class="sapUiRtaConfirmationDialogText" text="{/messageText}" />\n\t\t</layout:VerticalLayout>\n\t\t<sap.m:beginButton>\n\t\t\t<sap.m:Button class="sapUiRtaConfirmationDialogRemoveButton" text="{/removeText}" press="removeField" />\n\t\t</sap.m:beginButton>\n\t\t<sap.m:endButton>\n\t\t\t<sap.m:Button class="sapUiRtaConfirmationDialogCancelButton" text="{/cancelText}" press="closeDialog" />\n\t\t</sap.m:endButton>\n\t</sap.m:Dialog>\n</core:FragmentDefinition>'
}});
//# sourceMappingURL=library-preload.js.map