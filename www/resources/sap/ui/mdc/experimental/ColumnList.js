/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)

(c) Copyright 2009-2017 SAP SE. All rights reserved
 */
sap.ui.define(['jquery.sap.global','sap/ui/core/Control','sap/ui/mdc/base/FragmentControl','sap/ui/model/json/JSONModel'],function(q,C,F,J){"use strict";var c=F.extend("sap.ui.mdc.experimental.p13n.ColumnList",{metadata:{properties:{filterValue:{type:"string",defaultValue:""}},associations:{list:{type:"sap.ui.core.Control",multiple:false}},events:{}},fragment:"sap.ui.mdc.experimental.ColumnList",init:function(){sap.ui.getCore().getMessageManager().registerObject(this,true);}});c.prototype.hasActivatedItem=function(){var a=this.getModel("$this")._getObject("/_content/0/content/0/items");if(a){for(var i=0;i<a.length;i++){if(a[i].getActivated()){return true;}}}return false;};c.prototype.updateData=function(){var o=this.getModel("$this")._getObject("/_content/0/content/0");o.getBinding("items").checkUpdate(true);this.updateManagedObjectModel();};c.prototype.setList=function(s){var o=sap.ui.getCore().byId(s);function d(a){return function(){a.visible;};}if(o){if(o.getProvider){var p=o.getProvider();if(p instanceof sap.ui.mdc.provider.ListProvider){var m=p.getJSONCopy();var D={length:Object.keys(m).length,columns:m};for(var n in m){var a=m[n];a._selectable=a.position!=="first"&&a.position!=="last";if(a.dependants){var b=a.dependants.split(",");for(var i=0;i<b.length;i++){m[b[i]].dependant=true;Object.defineProperty(m[b[i]],"visibledependant",{get:d(a)});}}}var M=new J(D);var t=this;M.bindList=function(P,e,S,f,g){if(g&&g.columnList&&t[g.columnList]){return t[g.columnList].call(t,this,P,e,S,f);}return J.prototype.bindList.apply(this,arguments);};this.setModel(M,"data");this.updateData();this.updateManagedObjectModel();}}}};c.prototype._onChangeFilter=function(e){this.filterList(e.getParameter("value"));};c.prototype.filterList=function(s){this.setProperty("filterValue",s);this.updateData();};c.prototype.orderColumns=function(m,p,o,s,f,P){this._sType="orderColumns";var t=this;if(!s&&!f){f=[new sap.ui.model.Filter({path:"",test:function(V){var L=t.getProperty("filterValue");if(!L){return true;}return V.label.toUpperCase().indexOf(L.toUpperCase())>-1;}})];var v=new sap.ui.model.Sorter("visible");v.fnCompare=function(a,b){if(a==b){return 0;}if(a===false){return 1;}if(b===false){return-1;}};var d=new sap.ui.model.Sorter("");d.fnCompare=function(a,b){if(a.visible&&b.visible){var i=a.position;var e=b.position;if(e==="auto"){return 1;}if(i==="auto"){return-1;}if(e==="first"){return 1;}if(i==="first"){return-1;}if(i==="last"){i=100001;}if(e==="last"){e=100000;}if(i==-1){i=100000;}if(e==-1){e=100000;}if(i==e){return 0;}if(e==null){return-1;}if(i==null){return 1;}if(i<e){return-1;}if(i>e){return 1;}return 0;}else{var L=a.label,g=b.label;return sap.ui.model.Sorter.defaultComparator(L,g);}};s=[v,d];}var l=m.bindList(p,null,s,f);this._oListBinding=l;return l;};c.prototype.moveSelectedTop=function(){};c.prototype.moveSelectedBottom=function(){};c.prototype.moveSelectedDown=function(){};c.prototype.moveSelectedUp=function(){};return c;},true);
